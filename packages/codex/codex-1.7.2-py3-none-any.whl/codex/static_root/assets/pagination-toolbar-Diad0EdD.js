import{p as le,Y as ye,g as ce,l as Ze,t as D,h as me,a as r,v as ke,J as Z,aY as We,_ as A,o as d,A as b,n as ae,E as R,C as I,ay as Oe,aZ as Qe,a_ as Xe,U as pe,a$ as Je,aB as et,r as G,c as y,w as V,b as q,b0 as Ve,b1 as tt,$ as Ge,y as ue,m as be,L as h,F as J,B as $,z as at,b2 as st,b3 as Be,b4 as lt,b5 as rt,b6 as it,H as nt,Q as ot,R as ut,b7 as dt,T as ct,i as K,P as mt,ab as vt,a9 as Se,ak as we,f,b8 as Ne,aS as _e,aU as Ie,e as ge,b9 as ht,aW as ft,ba as Ae,j as ze,q as X,K as Me,Z as pt,aN as bt,bb as gt,k as yt}from"./main-BVKrDunc.js";import{q as kt,r as St,C as wt,V as de,b as _t,i as Ct,j as Tt,t as Vt,e as Bt,v as Nt,w as It,g as Mt}from"./VDialog-Db4tJYqR.js";import{C as Rt}from"./change-password-dialog-DJtOQw7K.js";import{C as Lt}from"./confirm-dialog-CME4gKSZ.js";import{V as ve,R as Pt,u as Ft,c as Re}from"./transition-DWVQ2EZ3.js";import{c as Dt,d as Et,e as Ot}from"./VSelect-DqXJ23Pc.js";import{P as Gt}from"./unauthorized-CEGD20tR.js";import{e as At,m as zt,f as jt,u as Ut,g as Le,h as $t}from"./VSelectionControl-CxhDNufT.js";import{a as qt}from"./settings-drawer-yVoY-WCS.js";const xt=le({...ye(),...kt({variant:"text"})},"VToolbarItems"),Ns=ce()({name:"VToolbarItems",props:xt(),setup(e,t){let{slots:a}=t;return Ze({VBtn:{color:D(e,"color"),height:"inherit",variant:D(e,"variant")}}),me(()=>{var i;return r("div",{class:["v-toolbar-items",e.class],style:e.style},[(i=a.default)==null?void 0:i.call(a)])}),{}}}),Ht={name:"BookCover",props:{group:{type:String,required:!0},pks:{type:Array,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},mtime:{type:Number,default:Date.now()}},data(){return{showPlaceholder:!1}},computed:{...ke(Z,["coverSettings"]),coverSrc(){return We({group:this.group,pks:this.pks},this.coverSettings,this.mtime)},multiPkClasses(){const e=this.pks.length,t={};return e>=4?t.stack4=!0:e>1&&(t[`stack${e}`]=!0),t}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},Yt={class:"bookCover"},Kt={key:1,class:"childCount"};function Zt(e,t,a,i,n,s){return d(),b("div",Yt,[r(St,{src:s.coverSrc,class:ae(["coverImg",s.multiPkClasses])},null,8,["src","class"]),a.finished!==!0?(d(),b("div",{key:0,class:ae({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):R("",!0),a.group!=="c"?(d(),b("span",Kt,I(a.childCount),1)):R("",!0)])}const Wt=A(Ht,[["render",Zt],["__scopeId","data-v-39e3a9f8"]]),Qt=10,Xt={name:"DownloadButton",components:{ConfirmDialog:Lt,CodexListItem:wt},props:{button:{type:Boolean,default:!1},group:{type:String,default:"c"},pks:{type:Array,required:!0},children:{type:Number,required:!0},names:{type:Array,required:!0},ts:{type:Number,default:void 0}},data(){return{mdiDownload:Oe}},computed:{...ke(Z,["downloadSettings"]),show(){return this.pks&&this.pks.length>0&&!this.pks.includes(0)},isOneComic(){return this.group==="c"&&this.pks.length===1},downloadURL(){let e="";if(this.isOneComic){const t=this.pks[0];e=Qe({pk:t},this.downloadFn,this.ts)}else{const t=this.group,a=this.pks,i=this.downloadSettings;e=Xe({group:t,pks:a},this.downloadFn,i,this.ts)}return e},formattedChildren(){return pe.format(this.children)},downloadFn(){const e=this.names.filter(t=>t).join(" ");if(this.isOneComic)return e;{let t=Je[this.group];return t!=="Series"&&(t=t.slice(0,-1)),`${t} - ${e} Comics.zip`}},title(){let e="Download";return this.isOneComic?e+=" Book":e+=` ${this.formattedChildren} Books`,e},confirm(){return this.children>Qt},confirmText(){return`Download ${this.formattedChildren} books`}},methods:{download(){const e=this.downloadURL,t=this.downloadFn;if(this.isOneComic)et(e,t);else{const a=document.createElement("a");a.download=this.downloadFn,a.href=this.downloadURL,a.click(),a.remove()}}}};function Jt(e,t,a,i,n,s){const o=G("CodexListItem"),l=G("ConfirmDialog");return s.show&&!s.confirm&&a.button?(d(),y(de,{key:0,onClick:s.download},{default:V(()=>[r(ve,null,{default:V(()=>[q(I(n.mdiDownload),1)]),_:1}),q(" "+I(s.title),1)]),_:1},8,["onClick"])):s.show&&!s.confirm?(d(),y(o,{key:1,"prepend-icon":n.mdiDownload,title:s.title,onClick:s.download},null,8,["prepend-icon","title","onClick"])):s.show?(d(),y(l,{key:2,button:a.button,"prepend-icon":n.mdiDownload,"button-text":s.title,"title-text":s.title,text:"May take a while","confirm-text":"Download",onConfirm:s.download},null,8,["button","prepend-icon","button-text","title-text","onConfirm"])):R("",!0)}const ea=A(Xt,[["render",Jt],["__scopeId","data-v-8378faf8"]]),ta=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],aa=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],sa=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],la=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Pe=(e,t,a)=>{let i=e;return typeof t=="string"||Array.isArray(t)?i=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(i=e.toLocaleString(void 0,a)),i};function ra(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?la:sa:t.binary?aa:ta,i=t.space?" ":"";if(t.signed&&e===0)return` 0${i}${a[0]}`;const n=e<0,s=n?"-":t.signed?"+":"";n&&(e=-e);let o;if(t.minimumFractionDigits!==void 0&&(o={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(o={maximumFractionDigits:t.maximumFractionDigits,...o}),e<1){const B=Pe(e,t.locale,o);return s+B+i+a[0]}const l=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),a.length-1);e/=(t.binary?1024:1e3)**l,o||(e=e.toPrecision(3));const v=Pe(Number(e),t.locale,o),c=a[l];return s+v+i+c}const Fe=new Set(["",Ve,Ve.toString(),void 0]),ia=function(e){let t;return Fe.has(e)?t=e:e instanceof Object?Fe.has(e.pk)?t=void 0:t={value:e.pk,title:e.name}:t={value:e,title:e.toString()},e!=null&&e.url&&(t.url=e.url),t},na=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},oa=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},ua=function(e,t,a=!1){var l;const i=e||[],n=t&&t.toLowerCase();let s=[];for(const v of i){const c=ia(v);c!=null&&(!n||(l=c==null?void 0:c.title)!=null&&l.toLowerCase().includes(n))&&s.push(c)}const o=a?oa:na;return s.sort(o)},da={name:"MetadataTags",props:{label:{type:String,required:!0},values:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},data(){return{mdiFilter:tt,mdiOpenInNew:Ge}},computed:{...ue(Z,{filterValues(e){const t=this.filter||this.label.toLowerCase();return e.settings.filters[t]},topGroup:e=>e.settings.topGroup}),model(){return ua(this.values)},chipClass(e){return{browseChip:this.filter&&e}}},methods:{...be(Z,["setSettings"]),chipColor(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""},onClick(e){if(!this.filter||!e)return;const t=["f","s"].includes(this.topGroup)?this.topGroup:"r",a=t==="s"&&this.filter==="storyArcs";if(!a){const o={filters:{[this.filter]:[e]}};this.setSettings(o)}const s={name:"browser",params:{group:t,pk:a?e:0,page:1}};this.$router.push(s)}}},ca={key:0,class:"tags"},ma={class:"chipGroupLabel"},va=["href"];function ha(e,t,a,i,n,s){return s.model&&s.model.length>0?(d(),b("div",ca,[h("div",ma,I(a.label),1),r(Et,{column:!0,multiple:"",value:s.model},{default:V(()=>[(d(!0),b(J,null,$(s.model,o=>(d(),y(Dt,{key:`${a.label}/${o.value}`,color:s.chipColor(o.value),value:o.value,onClick:l=>s.onClick(o.value)},{default:V(()=>[o.url?(d(),b("a",{key:0,href:o.url,target:"_blank"},[q(I(o.title),1),r(ve,null,{default:V(()=>[q(I(n.mdiOpenInNew),1)]),_:1})],8,va)):(d(),b("span",{key:1,class:ae(s.chipClass)},I(o.title),3))]),_:2},1032,["color","value","onClick"]))),128))]),_:1},8,["value"])])):R("",!0)}const je=A(da,[["render",ha],["__scopeId","data-v-75fd687b"]]),fa={name:"MetadataContributorsTable",components:{MetadataTags:je},props:{value:{type:Array,default:void 0}},computed:{contributorsDict(){const e={};if(!this.value)return e;for(const{role:i,person:n}of this.value){const s=at(i.name)+"s";e[s]||(e[s]=[]),e[s].push(n)}const t=Object.keys(e).sort((i,n)=>i.localeCompare(n)),a={};for(const i of t)a[i]=e[i].sort((n,s)=>n.name.localeCompare(s.name));return a}}},pa={key:0};function ba(e,t,a,i,n,s){const o=G("MetadataTags");return Object.keys(s.contributorsDict).length>0?(d(),b("div",pa,[t[0]||(t[0]=h("h3",null,"Contributors",-1)),(d(!0),b(J,null,$(Object.entries(s.contributorsDict),([l,v])=>(d(),y(o,{key:l,values:v,label:l,filter:"contributors"},null,8,["values","label"]))),128))])):R("",!0)}const ga=A(fa,[["render",ba]]),De="(Empty)",ya={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:[Boolean,String],default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:Ge}},computed:{...ue(Z,{browserShow:e=>e.settings.show,browserTopGroup:e=>e.settings.topGroup,folderViewEnabled:e=>e.page.adminFlags.folderView}),computedValue(){return this.value&&this.value.name!==void 0?this.value.name:this.value},lastSlashIndex(){return this.computedValue.lastIndexOf("/")+1},displayValue(){let e;return this.group&&this.computedValue===""?e=De:this.group==="f"&&this.computedValue?e=this.computedValue.substring(0,this.lastSlashIndex):e=this.computedValue,e},empty(){return this.displayValue===De},_browserGroupHref(){const e=this.group,t=this.$router.currentRoute.value.params;if(!e||t.group===e||e==="f"&&!this.folderViewEnabled||!["a","f"].includes(e)&&!this.browserShow[e])return;const a=this.value.ids?this.value.ids:[this.value.pk];if(!a||!a.length)return;const n={topGroup:this.getTopGroup(e)};return st({group:e,pks:a,query:n})},_linkHref(){return this.link===!0?this.displayValue:this.link?this.link:!1},href(){return this._browserGroupHref?this._browserGroupHref:this._linkHref},target(){return this.link?"_blank":""},title(){return this._browserGroupHref?`Browse to ${this.label}`:this.label},baseName(){return this.group==="f"?this.computedValue.substring(this.lastSlashIndex):""},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group}},methods:{getTopGroup(e){let t;if(this.browserTopGroup===e||["a","f"].includes(e))t=e;else{const a=Be.indexOf(e);for(const i of Be.slice(a))if(i!=="r"&&this.browserShow[i]){t=i;break}}return t}}},ka={class:"textLabel"},Sa=["href","title","target"],wa={key:1,class:"textContent"},_a={key:2};function Ca(e,t,a,i,n,s){return s.displayValue?(d(),b("div",{key:0,class:ae(["text",{highlight:s.highlight}])},[h("div",ka,I(a.label),1),h("div",{class:ae(["textValue",{empty:s.empty}])},[s.href?(d(),b("a",{key:0,href:s.href,title:s.title,target:s.target},[q(I(s.displayValue)+" ",1),a.link?(d(),y(ve,{key:0,size:"small"},{default:V(()=>[q(I(n.mdiOpenInNew),1)]),_:1})):R("",!0)],8,Sa)):(d(),b("div",wa,I(s.displayValue),1)),s.baseName?(d(),b("span",_a,I(s.baseName),1)):R("",!0)],2)],2)):R("",!0)}const Ta=A(ya,[["render",Ca],["__scopeId","data-v-e07a86c1"]]),Ue=new Set("rtl","btt");Object.freeze(Ue);const Va=({ids:e,page:t,readingDirection:a,pageCount:i},n)=>{if(e.length<1||n&&!i)return"";const s=e[0];if(t)t=Number(t);else if(Ue.has(a)){const o=Number(i)-1;t=Math.max(o,0)}else t=0;return{name:"reader",params:{pk:s,page:t}}},Ee=lt("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pks:t}){await rt.getMetadata({group:e,pks:t},Z().metadataSettings).then(a=>{const i={...a.data};return i.loaded=!0,this.md=i,!0}).catch(a=>{console.error(a),this.clearMetadata()})},clearMetadata(){this.md=void 0}}}),Ba=1160,Na=.05,Ia=250,Ma={name:"MetadataButton",components:{BookCover:Wt,CloseButton:Rt,DownloadButton:ea,MetadataContributorsTable:ga,MetadataTags:je,MetadataText:Ta,PlaceholderLoading:Gt},props:{group:{type:String,required:!0},book:{type:Object,required:!0},children:{type:Number,default:1},toolbar:{type:Boolean,default:!1}},data(){return{mdiDownload:Oe,mdiTagOutline:it,dialog:!1,progress:0}},computed:{...ke(nt,["isUserAdmin"]),...ue(Z,{twentyFourHourTime:e=>{var t;return(t=e.settings)==null?void 0:t.twentyFourHourTime},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypes:e=>e.choices.static.identifierType,importMetadata:e=>{var t,a;return(a=(t=e.page)==null?void 0:t.adminFlags)==null?void 0:a.importMetadata},q:e=>e.settings.q}),...ue(Ee,{md:e=>e.md}),showContainer(){var e;return((e=this.md)==null?void 0:e.loaded)||!1},buttonVariant(){return this.toolbar?"plain":"text"},downloadGroup(){return this.md.group},downloadPks(){return this.md.ids},downloadNames(){const e=this.md;return e?e.fileName?[e.fileName]:[this.firstNameFromList(e.publisherList),this.firstNameFromList(e.imprintList),this.firstNameFromList(e.seriesList),this.firstNameFromList(e.volumeList),this.md.name]:["Unknown.cbz"]},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},readButtonIcon(){return this.isReadButtonEnabled?ot:ut},readerRoute(){var e;return(e=this.md)!=null&&e.ids?Va(this.md,this.importMetadata):{}},formattedIssue(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return dt(this.md)},readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=pe.format(this.md.page);e+=`Read ${a} of `}const t=pe.format(this.md.pageCount);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.size)>0?ra(this.md.size):0},fileType(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.fileType)||"Unknown"},titledIdentifiers(){var t;const e=[];if(!((t=this==null?void 0:this.md)!=null&&t.identifiers))return e;for(const a of this.md.identifiers){const i=a.name.split(":"),n=i[0],s=i[1],o=this.identifierTypeTitle(n);let l="";o&&o!=="None"&&(l+=o+":"),l+=s,e.push({...a,name:l})}return e},multiGroup(){var e;return(e=this.md)!=null&&e.ids?this.md.ids.length>1:!1}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...be(Ee,["clearMetadata","loadMetadata"]),...be(Z,["identifierTypeTitle"]),dialogOpened(){const e=this.book.ids?this.book.ids:[this.book.pk],t={group:this.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(Na,this.children/Ba)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Ia)},formatDateTime(e){return ct(e,this.twentyFourHourTime)},firstNameFromList(e){let t="";if(e){for(const a of Object.values(e))if(a.name){t=a.name;break}}return t}}},Ra={id:"metadataHeader"},La={id:"metadataBookCoverWrapper"},Pa={class:"inlineRow"},Fa={class:"inlineRow"},Da={class:"inlineRow"},Ea={key:1,class:"inlineRow"},Oa={id:"metadataBody"},Ga={class:"mdSection"},Aa={class:"quintRow"},za={class:"mdSection"},ja={class:"quarterRow"},Ua={class:"lastSmallRow"},$a={class:"halfRow mdSection"},qa={class:"mdSection"},xa={class:"mdSection"},Ha={class:"mdSection"},Ya={class:"mdSection"},Ka={class:"mdSection"},Za={class:"mdSection inlineRow"},Wa={class:"inlineRow"},Qa={id:"footerLinks"},Xa={key:1,id:"placeholderContainer"};function Ja(e,t,a,i,n,s){const o=G("CloseButton"),l=G("MetadataText"),v=G("BookCover"),c=G("MetadataTags"),B=G("MetadataContributorsTable"),w=G("DownloadButton"),N=G("PlaceholderLoading");return d(),y(Ct,{modelValue:n.dialog,"onUpdate:modelValue":t[3]||(t[3]=m=>n.dialog=m),fullscreen:"",transition:"dialog-bottom-transition"},{activator:V(({props:m})=>[r(de,K({"aria-label":"tags",class:"tagButton cardControlButton",variant:s.buttonVariant,icon:n.mdiTagOutline,title:"Tags"},m,{onClick:t[0]||(t[0]=mt(()=>{},["prevent"]))}),null,16,["variant","icon"])]),default:V(()=>[s.showContainer?(d(),b("div",{key:0,id:"metadataContainer",onKeyup:t[2]||(t[2]=vt(m=>n.dialog=!1,["esc"]))},[r(o,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[1]||(t[1]=m=>n.dialog=!1)}),h("header",Ra,[e.q?(d(),y(l,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):R("",!0),h("div",La,[r(v,{id:"bookCover",group:a.group,pks:e.md.ids,"child-count":e.md.childCount,finished:e.md.finished,mtime:e.md.mtime},null,8,["group","pks","child-count","finished","mtime"]),r(_t,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),h("div",Pa,[(d(!0),b(J,null,$(e.md.publisherList,m=>(d(),y(l,{id:"publisher",key:m.ids,value:m,group:"p",label:"Publisher",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]))),128)),(d(!0),b(J,null,$(e.md.imprintList,m=>(d(),y(l,{id:"imprint",key:m.ids,value:m,group:"i",label:"Imprint",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]))),128))]),h("div",Fa,[(d(!0),b(J,null,$(e.md.seriesList,m=>(d(),y(l,{id:"series",key:m.ids,value:m,label:"Series",group:"s",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]))),128))]),h("div",Da,[(d(!0),b(J,null,$(e.md.volumeList,m=>(d(),y(l,{id:"volume",key:m.ids,value:m,label:"Volume",group:"v",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]))),128)),r(l,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),r(l,{id:"issue",value:s.formattedIssue,label:"Issue",group:"c",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),r(l,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"]),r(l,{value:e.md.name,label:"Title"},null,8,["value"])]),e.md.year||e.md.month||e.md.day?(d(),b("div",Ea,[r(l,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),r(l,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),r(l,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):R("",!0)]),h("div",Oa,[h("section",Ga,[h("div",Aa,[r(l,{value:s.pages,label:"Pages"},null,8,["value"]),r(l,{label:"Finished",value:(!!e.md.finished).toString()},null,8,["value"]),r(l,{label:"Reading Direction",value:s.readingDirectionText},null,8,["value"]),r(l,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"]),r(l,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),h("section",za,[h("div",ja,[e.md.createdAt?(d(),y(l,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):R("",!0),e.md.updatedAt?(d(),y(l,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):R("",!0),r(l,{value:s.size,label:"Size"},null,8,["value"]),r(l,{value:s.fileType,label:"File Type"},null,8,["value"])]),h("div",Ua,[r(l,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),h("section",$a,[r(l,{value:e.md.country,label:"Country"},null,8,["value"]),r(l,{value:e.md.language,label:"Language"},null,8,["value"])]),h("section",qa,[r(c,{values:s.titledIdentifiers,label:"Identifiers"},null,8,["values"])]),h("section",xa,[r(l,{value:e.md.summary,label:"Summary"},null,8,["value"]),r(l,{value:e.md.review,label:"Review"},null,8,["value"])]),h("section",Ha,[r(l,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),r(l,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),r(l,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),h("section",Ya,[r(c,{values:e.md.genres,label:"Genres",filter:"genres"},null,8,["values"]),r(c,{values:e.md.characters,label:"Characters",filter:"characters"},null,8,["values"]),r(c,{values:e.md.teams,label:"Teams",filter:"teams"},null,8,["values"]),r(c,{values:e.md.locations,label:"Locations",filter:"locations"},null,8,["values"]),r(c,{values:e.md.seriesGroups,label:"Series Groups",filter:"seriesGroups"},null,8,["values"]),r(c,{values:e.md.stories,label:"Stories",filter:"stories"},null,8,["values"]),r(c,{values:e.md.storyArcNumbers,label:"Story Arcs",filter:"storyArcs"},null,8,["values"]),r(c,{values:e.md.tags,label:"Tags",filter:"tags"},null,8,["values"])]),h("section",Ka,[r(B,{value:e.md.contributors},null,8,["value"])]),h("section",Za,[r(l,{value:e.md.notes,label:"Notes"},null,8,["value"])]),h("section",Wa,[r(l,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),r(l,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])]),h("footer",Qa,[r(w,{id:"downloadButton",button:!0,group:s.downloadGroup,pks:s.downloadPks,children:a.children,names:s.downloadNames,ts:e.md.mtime},null,8,["group","pks","children","names","ts"]),s.isReadButtonShown?(d(),y(de,{key:0,to:s.readerRoute,title:"Read Comic",disabled:!s.isReadButtonEnabled},{default:V(()=>[r(ve,null,{default:V(()=>[q(I(s.readButtonIcon),1)]),_:1}),t[4]||(t[4]=q(" Read "))]),_:1},8,["to","disabled"])):R("",!0)])],32)):(d(),b("div",Xa,[t[5]||(t[5]=h("div",{id:"placeholderTitle"},"Tags Loading",-1)),r(N,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const Is=A(Ma,[["render",Ja],["__scopeId","data-v-0e7706fb"]]),es={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function ts(e,t,a,i,n,s){return d(),y(Ot,K(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:s.style,variant:"plain"}),Se({item:V(({item:o,props:l})=>[r(Tt,K(l,{density:"compact",variant:"plain",title:o.title,value:o.value}),null,16,["title","value"])]),_:2},[$(e.$slots,(o,l)=>({name:l,fn:V(v=>[we(e.$slots,l,K({props:o},v),void 0,!0)])}))]),1040,["label","aria-label","style"])}const Ms=A(es,[["render",ts],["__scopeId","data-v-e88da460"]]),Rs=Vt("v-spacer","div","VSpacer"),as={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function ss(e,t,a,i,n,s){return d(),y(de,{variant:"plain",density:"compact",class:ae(["paginationNavButton",s.classes]),size:"medium"},Se({_:2},[$(e.$slots,(o,l)=>({name:l,fn:V(v=>[we(e.$slots,l,K({props:o},v),void 0,!0)])}))]),1032,["class"])}const Ls=A(as,[["render",ss],["__scopeId","data-v-0450dab6"]]),Ce=Symbol.for("vuetify:v-slider");function ls(e,t,a){const i=a==="vertical",n=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return i?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}function rs(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const is=le({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...Bt(),...Nt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),ns=e=>{const t=f(()=>parseFloat(e.min)),a=f(()=>parseFloat(e.max)),i=f(()=>+e.step>0?parseFloat(e.step):0),n=f(()=>Math.max(Ne(i.value),Ne(t.value)));function s(o){if(o=parseFloat(o),i.value<=0)return o;const l=Ae(o,t.value,a.value),v=t.value%i.value,c=Math.round((l-v)/i.value)*i.value+v;return parseFloat(Math.min(c,a.value).toFixed(n.value))}return{min:t,max:a,step:i,decimals:n,roundValue:s}},os=e=>{let{props:t,steps:a,onSliderStart:i,onSliderMove:n,onSliderEnd:s,getActiveThumb:o}=e;const{isRtl:l}=_e(),v=D(t,"reverse"),c=f(()=>t.direction==="vertical"),B=f(()=>c.value!==v.value),{min:w,max:N,step:m,decimals:x,roundValue:z}=a,W=f(()=>parseInt(t.thumbSize,10)),H=f(()=>parseInt(t.tickSize,10)),j=f(()=>parseInt(t.trackSize,10)),E=f(()=>(N.value-w.value)/m.value),Q=D(t,"disabled"),O=f(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),g=f(()=>t.error||t.disabled?void 0:t.trackColor??t.color),L=f(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),_=Ie(!1),C=Ie(0),P=ge(),F=ge();function p(u){var Te;const S=t.direction==="vertical",$e=S?"top":"left",qe=S?"height":"width",xe=S?"clientY":"clientX",{[$e]:He,[qe]:Ye}=(Te=P.value)==null?void 0:Te.$el.getBoundingClientRect(),Ke=rs(u,xe);let fe=Math.min(Math.max((Ke-He-C.value)/Ye,0),1)||0;return(S?B.value:B.value!==l.value)&&(fe=1-fe),z(w.value+fe*(N.value-w.value))}const U=u=>{s({value:p(u)}),_.value=!1,C.value=0},Y=u=>{F.value=o(u),F.value&&(F.value.focus(),_.value=!0,F.value.contains(u.target)?C.value=ls(u,F.value,t.direction):(C.value=0,n({value:p(u)})),i({value:p(u)}))},M={passive:!0,capture:!0};function ee(u){n({value:p(u)})}function re(u){u.stopPropagation(),u.preventDefault(),U(u),window.removeEventListener("mousemove",ee,M),window.removeEventListener("mouseup",re)}function ie(u){var S;U(u),window.removeEventListener("touchmove",ee,M),(S=u.target)==null||S.removeEventListener("touchend",ie)}function he(u){var S;Y(u),window.addEventListener("touchmove",ee,M),(S=u.target)==null||S.addEventListener("touchend",ie,{passive:!1})}function T(u){u.preventDefault(),Y(u),window.addEventListener("mousemove",ee,M),window.addEventListener("mouseup",re,{passive:!1})}const k=u=>{const S=(u-w.value)/(N.value-w.value)*100;return Ae(isNaN(S)?0:S,0,100)},te=D(t,"showTicks"),se=f(()=>te.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(u=>({value:u,position:k(u),label:u.toString()})):Object.keys(t.ticks).map(u=>({value:parseFloat(u),position:k(parseFloat(u)),label:t.ticks[u]})):E.value!==1/0?ht(E.value+1).map(u=>{const S=w.value+u*m.value;return{value:S,position:k(S)}}):[]:[]),ne=f(()=>se.value.some(u=>{let{label:S}=u;return!!S})),oe={activeThumbRef:F,color:D(t,"color"),decimals:x,disabled:Q,direction:D(t,"direction"),elevation:D(t,"elevation"),hasLabels:ne,isReversed:v,indexFromEnd:B,min:w,max:N,mousePressed:_,numTicks:E,onSliderMousedown:T,onSliderTouchstart:he,parsedTicks:se,parseMouseMove:p,position:k,readonly:D(t,"readonly"),rounded:D(t,"rounded"),roundValue:z,showTicks:te,startOffset:C,step:m,thumbSize:W,thumbColor:O,thumbLabel:D(t,"thumbLabel"),ticks:D(t,"ticks"),tickSize:H,trackColor:g,trackContainerRef:P,trackFillColor:L,trackSize:j,vertical:c};return ft(Ce,oe),oe},us=le({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...ye()},"VSliderThumb"),ds=ce()({name:"VSliderThumb",directives:{Ripple:Pt},props:us(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:i}=t;const n=ze(Ce),{isRtl:s,rtlClasses:o}=_e();if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:l,step:v,disabled:c,thumbSize:B,thumbLabel:w,direction:N,isReversed:m,vertical:x,readonly:z,elevation:W,mousePressed:H,decimals:j,indexFromEnd:E}=n,Q=f(()=>c.value?void 0:W.value),{elevationClasses:O}=It(Q),{textColorClasses:g,textColorStyles:L}=Ft(l),{pageup:_,pagedown:C,end:P,home:F,left:p,right:U,down:Y,up:M}=gt,ee=[_,C,P,F,p,U,Y,M],re=f(()=>v.value?[1,2,3]:[1,5,10]);function ie(T,k){if(!ee.includes(T.key))return;T.preventDefault();const te=v.value||.1,se=(e.max-e.min)/te;if([p,U,Y,M].includes(T.key)){const oe=(x.value?[s.value?p:U,m.value?Y:M]:E.value!==s.value?[p,M]:[U,M]).includes(T.key)?1:-1,u=T.shiftKey?2:T.ctrlKey?1:0;k=k+oe*te*re.value[u]}else if(T.key===F)k=e.min;else if(T.key===P)k=e.max;else{const ne=T.key===C?1:-1;k=k-ne*te*(se>100?se/10:10)}return Math.max(e.min,Math.min(e.max,k))}function he(T){const k=ie(T,e.modelValue);k!=null&&i("update:modelValue",k)}return me(()=>{const T=X(E.value?100-e.position:e.position,"%");return r("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&H.value},e.class,o.value],style:[{"--v-slider-thumb-position":T,"--v-slider-thumb-size":X(B.value)},e.style],role:"slider",tabindex:c.value?-1:0,"aria-label":e.name,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!z.value,"aria-orientation":N.value,onKeydown:z.value?void 0:he},[r("div",{class:["v-slider-thumb__surface",g.value,O.value],style:{...L.value}},null),Me(r("div",{class:["v-slider-thumb__ripple",g.value],style:L.value},null),[[pt("ripple"),e.ripple,null,{circle:!0,center:!0}]]),r(At,{origin:"bottom center"},{default:()=>{var k;return[Me(r("div",{class:"v-slider-thumb__label-container"},[r("div",{class:["v-slider-thumb__label"]},[r("div",null,[((k=a["thumb-label"])==null?void 0:k.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(v.value?j.value:1)])])]),[[bt,w.value&&e.focused||w.value==="always"]])]}})])}),{}}}),cs=le({start:{type:Number,required:!0},stop:{type:Number,required:!0},...ye()},"VSliderTrack"),ms=ce()({name:"VSliderTrack",props:cs(),emits:{},setup(e,t){let{slots:a}=t;const i=ze(Ce);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,parsedTicks:s,rounded:o,showTicks:l,tickSize:v,trackColor:c,trackFillColor:B,trackSize:w,vertical:N,min:m,max:x,indexFromEnd:z}=i,{roundedClasses:W}=Mt(o),{backgroundColorClasses:H,backgroundColorStyles:j}=Re(B),{backgroundColorClasses:E,backgroundColorStyles:Q}=Re(c),O=f(()=>`inset-${N.value?"block":"inline"}-${z.value?"end":"start"}`),g=f(()=>N.value?"height":"width"),L=f(()=>({[O.value]:"0%",[g.value]:"100%"})),_=f(()=>e.stop-e.start),C=f(()=>({[O.value]:X(e.start,"%"),[g.value]:X(_.value,"%")})),P=f(()=>l.value?(N.value?s.value.slice().reverse():s.value).map((p,U)=>{var M;const Y=p.value!==m.value&&p.value!==x.value?X(p.position,"%"):void 0;return r("div",{key:p.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":p.position>=e.start&&p.position<=e.stop,"v-slider-track__tick--first":p.value===m.value,"v-slider-track__tick--last":p.value===x.value}],style:{[O.value]:Y}},[(p.label||a["tick-label"])&&r("div",{class:"v-slider-track__tick-label"},[((M=a["tick-label"])==null?void 0:M.call(a,{tick:p,index:U}))??p.label])])}):[]);return me(()=>r("div",{class:["v-slider-track",W.value,e.class],style:[{"--v-slider-track-size":X(w.value),"--v-slider-tick-size":X(v.value)},e.style]},[r("div",{class:["v-slider-track__background",E.value,{"v-slider-track__background--opacity":!!n.value||!B.value}],style:{...L.value,...Q.value}},null),r("div",{class:["v-slider-track__fill",H.value],style:{...C.value,...j.value}},null),l.value&&r("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":l.value==="always"}]},[P.value])])),{}}}),vs=le({...zt(),...is(),...jt(),modelValue:{type:[Number,String],default:0}},"VSlider"),hs=ce()({name:"VSlider",props:vs(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:i}=t;const n=ge(),{rtlClasses:s}=_e(),o=ns(e),l=yt(e,"modelValue",void 0,g=>o.roundValue(g??o.min.value)),{min:v,max:c,mousePressed:B,roundValue:w,onSliderMousedown:N,onSliderTouchstart:m,trackContainerRef:x,position:z,hasLabels:W,readonly:H}=os({props:e,steps:o,onSliderStart:()=>{i("start",l.value)},onSliderEnd:g=>{let{value:L}=g;const _=w(L);l.value=_,i("end",_)},onSliderMove:g=>{let{value:L}=g;return l.value=w(L)},getActiveThumb:()=>{var g;return(g=n.value)==null?void 0:g.$el}}),{isFocused:j,focus:E,blur:Q}=Ut(e),O=f(()=>z(l.value));return me(()=>{const g=Le.filterProps(e),L=!!(e.label||a.label||a.prepend);return r(Le,K({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||W.value,"v-slider--focused":j.value,"v-slider--pressed":B.value,"v-slider--disabled":e.disabled},s.value,e.class],style:e.style},g,{focused:j.value}),{...a,prepend:L?_=>{var C,P;return r(J,null,[((C=a.label)==null?void 0:C.call(a,_))??(e.label?r($t,{id:_.id.value,class:"v-slider__label",text:e.label},null):void 0),(P=a.prepend)==null?void 0:P.call(a,_)])}:void 0,default:_=>{let{id:C,messagesId:P}=_;return r("div",{class:"v-slider__container",onMousedown:H.value?void 0:N,onTouchstartPassive:H.value?void 0:m},[r("input",{id:C.value,name:e.name||C.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:l.value},null),r(ms,{ref:x,start:0,stop:O.value},{"tick-label":a["tick-label"]}),r(ds,{ref:n,"aria-describedby":P.value,focused:j.value,min:v.value,max:c.value,modelValue:l.value,"onUpdate:modelValue":F=>l.value=F,position:O.value,elevation:e.elevation,onFocus:E,onBlur:Q,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),{}}}),fs={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function ps(e,t,a,i,n,s){return d(),y(hs,K({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":V(({index:o})=>[q(I(o+a.min),1)]),_:1},16,["min"])}const Ps=A(fs,[["render",ps],["__scopeId","data-v-01b67afd"]]),bs={name:"PaginationToolbar"};function gs(e,t,a,i,n,s){return d(),y(qt,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Se({_:2},[$(e.$slots,(o,l)=>({name:l,fn:V(v=>[we(e.$slots,l,K({props:o},v),void 0,!0)])}))]),1024)}const Fs=A(bs,[["render",gs],["__scopeId","data-v-cfa8cce0"]]);export{Wt as B,ea as D,Is as M,Fe as N,Ls as P,Ms as T,Ns as V,Rs as a,Ps as b,Fs as c,Va as g,ra as p,ua as t};
