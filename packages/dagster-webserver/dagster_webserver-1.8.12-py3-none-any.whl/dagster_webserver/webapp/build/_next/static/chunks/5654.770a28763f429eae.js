"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5654],{63065:function(e,t,r){r.d(t,{e:function(){return P}});var n=r(73235),s=r(52322),i=r(14934),o=r(79106),l=r(39013),a=r(37483),d=r(74159),c=r(45774),u=r(2784),h=r(20958),x=r(78491),p=r(16336),g=r(44900),j=r(4378),m=r(43250),f=r(35002),v=r(43212),y=r(88510),w=r(22921),b=r(17008),C=r(98956),k=r(50646),E=r(63485),S=r(83738),T=r(22563);let A=e=>{let{repos:t}=e,r=(0,u.useRef)(null),n=(0,u.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,T.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:l}=(0,k.N)(w.y,n),a=(0,u.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,jobs:n}=t;e.push({type:"header",repoAddress:r,jobCount:n.length});let s=(0,T.Uz)(r);i.includes(s)&&n.forEach(t=>{let{isJob:n,name:s}=t;e.push({type:"job",repoAddress:r,isJob:n,name:s})})}),e},[t,i]),d=(0,C.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),c=(0,y.MG)({count:a.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=a[e];return(null==t?void 0:t.type)==="header"?b.lo:64},overscan:10}),h=c.getTotalSize(),x=c.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(b.W2,{ref:r,children:[(0,s.jsx)(E.I,{}),(0,s.jsx)(b.Nh,{$totalHeight:h,children:x.map(e=>{let{index:t,key:r,size:n,start:c}=e,u=a[t];return"header"===u.type?(0,s.jsx)(S.vG,{repoAddress:u.repoAddress,height:n,start:c,onToggle:o,onToggleAll:l,expanded:i.includes((0,T.Uz)(u.repoAddress)),showLocation:d.has(u.repoAddress.name),rightElement:(0,s.jsx)(f.u,{content:1===u.jobCount?"1 job":"".concat(u.jobCount," jobs"),placement:"top",children:(0,s.jsx)(v.V,{children:u.jobCount})})},r):(0,s.jsx)(E.b,{name:u.name,isJob:u.isJob,repoAddress:u.repoAddress,height:n,start:c},r)})})]})})};var L=r(907),O=r(49455),N=r(34219),I=r(73658),M=r(8355),z=r(65822);function _(){let e=(0,n._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _=function(){return e},e}let P=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:n}=(0,u.useContext)(M.C5),[x,g]=(0,j.q)({queryKey:"search",defaults:{search:""}}),f=e.length,v=(0,h.aM)(F,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:y,loading:w}=v,b=(0,p.C4)(v,p.dT),C=(0,u.useMemo)(()=>{let e=Object.values(n).filter(e=>"WorkspaceLocationEntry"===e.__typename),r=null==y?void 0:y.workspaceOrError,s=(null==r?void 0:r.__typename)==="Workspace"?r.locationEntries:e,i=(0,O.S)(t);return R(s).filter(e=>{let{repoAddress:t}=e;return i.has((0,T.Uz)(t))})},[n,y,t]),k=!y&&r;(0,N.j$)("OverviewJobs",!k);let E=x.trim().toLocaleLowerCase(),S=E.length>0,L=(0,u.useMemo)(()=>{let e=E.toLocaleLowerCase();return C.map(t=>{let{repoAddress:r,jobs:n}=t;return{repoAddress:r,jobs:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{jobs:t}=e;return t.length>0})},[C,E]),z=w&&!y;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.x,{padding:{horizontal:24,vertical:12},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,s.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[f>1?(0,s.jsx)(m.C,{}):null,(0,s.jsx)(d.oi,{icon:"search",value:x,rightElement:z?(0,s.jsx)(I.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:e=>g(e.target.value),placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,s.jsx)(p.xi,{refreshState:b})]}),k&&!f?(0,s.jsx)(i.x,{padding:64,children:(0,s.jsx)(c.f,{label:"Loading jobs…"})}):(()=>{if(k)return(0,s.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(o.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:l.$()},children:"Loading jobs…"})]})});let r=e.length>t.length;return L.length?(0,s.jsx)(A,{repos:L}):S?(0,s.jsx)(i.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No matching jobs",description:r?(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:x})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:x})," were found in your definitions"]})})}):(0,s.jsx)(i.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No jobs",description:r?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})})()]})},R=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,pipelines:s}=t,i=(0,z.kQ)(n,e.name),o=s.filter(e=>{let{name:t}=e;return!(0,g.pv)(t)}).map(e=>({isJob:e.isJob,name:e.name}));o.length>0&&r.push({repoAddress:i,jobs:o})}return(0,L.S)(r)},F=(0,h.Ps)(_(),x.B)},45654:function(e,t,r){r.r(t),r.d(t,{OverviewRoot:function(){return tU},default:function(){return t$}});var n=r(52322),s=r(7267),i=r(66626),o=r(38491),l=r(14934),a=r(2784),d=r(79106),c=r(74159),u=r(16629),h=r(60129),x=r(63019),p=r(43212),g=r(39013),j=r(46100),m=r(60603),f=r(35292),v=r(88510),y=r(47933),w=r(35505),b=r(99590),C=r(16336),k=r(69737),E=r(99048),S=r(98705),T=r(44900),A=r(46318),L=r(79342),O=r(18436),N=r(75442),I=r(20171),M=r(4378),z=r(79059),_=r(17008),P=r(65822),R=r(10539);let F=e=>{let{Header:t,TabButton:r}=e;(0,k.Px)(),(0,I.j)("Overview | Assets");let{assets:s,query:i,error:o,loading:h}=(0,O.Zg)(),x=(0,C.bT)({refresh:i,intervalMs:C.dT,leading:!0}),p=a.useMemo(()=>s?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let r=e.definition.groupName,n=e.definition.repository.name,s="".concat(r,"||").concat(n),i=t[s]||{groupName:r,repositoryName:n,assets:[]};i.assets.push(e),t[s]=i}),Object.values(t)}(s):[],[s]),[g,j]=(0,M.q)({queryKey:"q",decode:e=>e.searchQuery?JSON.parse(e.searchQuery):"",encode:e=>({searchQuery:e?JSON.stringify(e):void 0})}),m=a.useMemo(()=>""===g?p:p.filter(e=>(e.groupName||B).toLowerCase().includes(g.toLowerCase())||e.repositoryName.toLowerCase().includes(g.toLowerCase())),[p,g]),f=a.useMemo(()=>{var e;return null!==(e=m.flatMap(e=>e.assets.map(e=>e.key)))&&void 0!==e?e:[]},[m]);(0,E.NY)(f,"OverviewAssetsRoot");let w=a.useRef(null),S=(0,v.MG)({count:m.length,getScrollElement:()=>w.current,estimateSize:()=>82,overscan:5}),T=S.getTotalSize(),A=S.getVirtualItems();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,n.jsx)(t,{refreshState:x}),(0,n.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,n.jsx)(r,{selected:"assets"}),(0,n.jsx)(c.oi,{value:g,onChange:e=>{j(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,n.jsx)(l.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,n.jsx)(u.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,n.jsxs)(n.Fragment,{children:["Use the ",(0,n.jsx)(y.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),h?(0,n.jsx)(l.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(d.$,{purpose:"page"})}):o?(0,n.jsx)(l.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(b.T9,{error:o})}):(0,n.jsx)(l.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,n.jsxs)(_.W2,{ref:w,children:[(0,n.jsx)($,{}),(0,n.jsx)(_.Nh,{$totalHeight:T,children:A.map(e=>{let{index:t,key:r,size:s,start:i}=e,o=m[t];return(0,n.jsx)(q,{start:i,height:s,group:o},r)})})]})})]})},U="5fr 1fr 1fr 1fr 1fr",$=()=>(0,n.jsxs)(_.VJ,{templateColumns:U,sticky:!0,children:[(0,n.jsx)(_.qN,{children:"Group name"}),(0,n.jsx)(_.qN,{children:"Missing"}),(0,n.jsx)(_.qN,{children:"Failed/Overdue"}),(0,n.jsx)(_.qN,{children:"In progress"}),(0,n.jsx)(_.qN,{children:"Materialized"})]}),B="Ungrouped Assets";function q(e){var t,r;let{height:s,start:i,group:o}=e,c=a.useMemo(()=>o.assets.map(e=>({path:e.key.path})),[o.assets]),{liveDataByNode:u}=(0,E.NY)(c),j=a.useMemo(()=>(0,A.s)(o.assets,u),[u,o.assets]),m=null===(r=o.assets.find(e=>{var t;return null===(t=e.definition)||void 0===t?void 0:t.repository}))||void 0===r?void 0:null===(t=r.definition)||void 0===t?void 0:t.repository,f=(0,P.kQ)((null==m?void 0:m.name)||"",(null==m?void 0:m.location.name)||""),{containerProps:v,viewport:w}=(0,h.S)(),b=c.length!==Object.keys(u).length,C=b?"":"0";return(0,n.jsx)(_.X2,{$height:s,$start:i,children:(0,n.jsxs)(W,{border:"bottom",children:[(0,n.jsx)(J,{children:(0,n.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,n.jsxs)(l.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,n.jsxs)(l.x,{flex:{direction:"row",gap:8},children:[(0,n.jsx)(x.JO,{name:"asset_group"}),o.groupName?(0,n.jsx)(y.rU,{style:{fontWeight:700},to:(0,R.$U)(f,"/asset-groups/".concat(o.groupName)),children:o.groupName}):B]}),(0,n.jsx)("div",{...v,children:(0,n.jsx)(V,{maxWidth:w.width,children:(0,n.jsx)(z.b,{repoAddress:f,showRefresh:!1})})})]}),(0,n.jsx)(l.x,{flex:{direction:"column",justifyContent:"center"},children:b?(0,n.jsx)(d.$,{purpose:"body-text"}):null})]})}),(0,n.jsx)(J,{children:j.missing.length?(0,n.jsx)(Q,{assets:j.missing,getCount:e=>{let{status:t}=e;return t.case===S.KB.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,n.jsx)(p.V,{intent:"none",children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(g.im()),borderRadius:"50%"}}),j.missing.length]})})}):C}),(0,n.jsx)(J,{children:j.failed.length?(0,n.jsx)(Q,{assets:j.failed,getCount:e=>{let{status:t}=e;return t.case===S.KB.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,n.jsx)(p.V,{intent:"danger",children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),j.failed.length]})})}):C}),(0,n.jsx)(J,{children:j.inprogress.length?(0,n.jsx)(Q,{assets:j.inprogress,getCount:e=>{let{status:t}=e;return t.case===S.KB.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,n.jsx)(p.V,{intent:"primary",icon:"spinner",children:j.inprogress.length})}):C}),(0,n.jsx)(J,{children:j.successful.length?(0,n.jsx)(Q,{assets:j.successful,getCount:e=>{let{status:t}=e;return t.case===S.KB.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,n.jsx)(p.V,{intent:"success",children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{backgroundColor:g.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),j.successful.length]})})}):C})]})})}let W=(0,w.ZP)(l.x).withConfig({componentId:"sc-9ca8ef04-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],U),J=e=>{let{children:t}=e;return(0,n.jsx)(_.E5,{style:{color:g.Ep()},children:(0,n.jsx)(l.x,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},V=w.ZP.div.withConfig({componentId:"sc-9ca8ef04-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],g.$(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function Q(e){let{assets:t,children:r,getCount:s,adjective:i}=e;return(0,n.jsx)(D,{children:(0,n.jsx)(j.P,{items:t,itemPredicate:(e,t)=>(0,T.ll)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=s(e);return(0,n.jsx)(K,{to:(0,N.p)(e.asset.key),target:"_blank",children:(0,n.jsx)(m.sN,{text:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,n.jsx)("div",{style:{paddingLeft:"4px"},children:(0,n.jsx)(x.JO,{name:"asset"})}),(0,n.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,T.ll)(e.asset.key)}),t&&t>0?(0,n.jsxs)(f.YS,{style:{color:g.$()},children:[(0,L._e)(t)," ",i]}):null]})},(0,T.ll)(e.asset.key))})},onItemSelect:()=>{},children:r})})}let D=w.ZP.div.withConfig({componentId:"sc-9ca8ef04-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),K=(0,w.ZP)(y.rU).withConfig({componentId:"sc-9ca8ef04-3"})(["&:hover{text-decoration:none;}"]);var Y=r(74580);let H=()=>null;var G=r(73407),Z=r(49438),X=r(87171),ee=r(39268),et=r(71348),er=r(89918);let en=e=>{let{refreshState:t,tab:r}=e,{flagLegacyNav:s,flagRunsFeed:i}=(0,Z.gV)(),o=(0,et.dx)(),c=(0,ee.I)(),{enableAssetHealthOverviewPreview:u}=(0,a.useContext)(X.G);return(0,n.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,n.jsxs)(G.mQ,{selectedTabId:r,children:[(0,n.jsx)(er.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),u&&(0,n.jsx)(er.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),s?(0,n.jsx)(er.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}):null,s?(0,n.jsx)(er.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}):null,s?(0,n.jsx)(er.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}):null,"has-global-amp"===c?(0,n.jsx)(er.f,{id:"amp",title:(0,n.jsxs)(l.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,n.jsx)("div",{children:"Auto-materialize"}),o.loading?(0,n.jsx)(d.$,{purpose:"body-text"}):(0,n.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===o.paused?g.L$():g.md()}})]}),to:"/overview/automation"}):null,(0,n.jsx)(er.f,{id:"resources",title:"Resources",to:"/overview/resources"}),i?null:(0,n.jsx)(er.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),t?(0,n.jsx)(l.x,{style:{alignSelf:"center"},children:(0,n.jsx)(C.xi,{refreshState:t})}):null]})},es=e=>{let{tab:t,queryData:r,refreshState:s,...i}=e;return(0,n.jsx)(Y.m,{tabs:(0,n.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,n.jsx)(en,{tab:t,queryData:r,refreshState:s}),(0,n.jsx)(H,{})]}),...i})};var ei=r(73466),eo=r(17872),el=r(30001),ea=r(38267);let ed=()=>{(0,I.j)("Overview | Activity");let e=a.useCallback(e=>{let{refreshState:t}=e;return(0,n.jsx)(es,{tab:"activity",refreshState:t})},[]),[t,r]=(0,el.U)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:i}=a.useContext(X.G),d=i?"timeline":t,c=a.useCallback(e=>{let{selected:t}=e;return i?null:(d!==t&&r(t),(0,n.jsxs)(o.zH,{children:[(0,n.jsx)(ea.Q1,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,n.jsx)(ea.Q1,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[d,r,i]);return(0,n.jsx)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,n.jsxs)(s.rs,{children:[!i&&(0,n.jsx)(eo.A,{path:"/overview/activity/assets",children:(0,n.jsx)(F,{Header:e,TabButton:c})}),(0,n.jsx)(eo.A,{path:"/overview/activity/timeline",children:(0,n.jsx)(ei.U,{Header:e,TabButton:c})}),(0,n.jsx)(eo.A,{path:"*",isNestingRoute:!0,render:a.useCallback(()=>"timeline"===d?(0,n.jsx)(s.l_,{to:"/overview/activity/timeline"}):(0,n.jsx)(s.l_,{to:"/overview/activity/assets"}),[d])})]})})};var ec=r(63065);let eu=()=>((0,k.Px)(),(0,I.j)("Overview | Jobs"),(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(Y.m,{title:(0,n.jsx)(f.X6,{children:"Overview"}),tabs:(0,n.jsx)(en,{tab:"jobs"})}),(0,n.jsx)(ec.e,{})]}));var eh=r(73235),ex=r(37483),ep=r(35002),eg=r(22921),ej=r(3922),em=r(98956),ef=r(50646),ev=r(83738),ey=r(22563);let ew=e=>{let{repos:t}=e,r=(0,a.useRef)(null),s=(0,a.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ey.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:l}=(0,ef.N)(eg.y,s),d=(0,a.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,resources:n}=t;e.push({type:"header",repoAddress:r,resourceCount:n.length});let s=(0,ey.Uz)(r);i.includes(s)&&n.forEach(t=>{e.push({type:"resource",repoAddress:r,...t})})}),e},[t,i]),c=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,v.MG)({count:d.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=d[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),x=u.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(_.W2,{ref:r,children:[(0,n.jsx)(ej.f,{}),(0,n.jsx)(_.Nh,{$totalHeight:h,children:x.map(e=>{let{index:t,key:r,size:s,start:a}=e,u=d[t];return"header"===u.type?(0,n.jsx)(ev.vG,{repoAddress:u.repoAddress,height:s,start:a,onToggle:o,onToggleAll:l,expanded:i.includes((0,ey.Uz)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,n.jsx)(ep.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,n.jsx)(p.V,{children:u.resourceCount})})},r):(0,n.jsx)(ej.K,{height:s,start:a,...u},r)})})]})})};var eb=r(907),eC=r(49455),ek=r(20958),eE=r(78491),eS=r(43250),eT=r(71662),eA=r(73658),eL=r(8355);function eO(){let e=(0,eh._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return eO=function(){return e},e}let eN=()=>{(0,k.Px)(),(0,I.j)("Overview | Resources");let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,a.useContext)(eL.C5),[i,o]=(0,M.q)({queryKey:"search",defaults:{search:""}}),u=e.length,h=(0,ek.aM)(eM,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:x,loading:p}=h,j=(0,C.C4)(h,C.dT),m=(0,a.useMemo)(()=>{let e=(0,eC.S)(t),r=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==x?void 0:x.workspaceOrError;return eI((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:r).filter(t=>{let{repoAddress:r}=t;return e.has((0,ey.Uz)(r))})},[s,x,t]),f=!x&&p&&r,v=i.trim().toLocaleLowerCase(),y=v.length>0,w=(0,a.useMemo)(()=>{let e=v.toLocaleLowerCase();return m.map(t=>{let{repoAddress:r,resources:n}=t;return{repoAddress:r,resources:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[m,v]),b=p&&!x;return(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"resources",refreshState:j}),(0,n.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,n.jsx)(eS.C,{}):null,(0,n.jsx)(c.oi,{icon:"search",value:i,rightElement:b?(0,n.jsx)(eA.W,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>o(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),f&&!u?(0,n.jsx)(l.x,{padding:64,children:(0,n.jsx)(d.$,{purpose:"page"})}):(()=>{if(f)return(0,n.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(d.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:g.$()},children:"Loading resources…"})]})});let r=e.length>t.length;return w.length?(0,n.jsx)(ew,{repos:w}):y?(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No matching resources",description:r?(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in your definitions"]})})}):(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No resources",description:r?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},eI=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,allTopLevelResourceDetails:s}=t,i=(0,P.kQ)(n,e.name);s.length>0&&r.push({repoAddress:i,resources:s})}return(0,eb.S)(r)},eM=(0,ek.Ps)(eO(),eE.B,eT.L);var ez=r(17702),e_=r(87209),eP=r(27028);let eR=e=>{let{repos:t,headerCheckbox:r,checkedKeys:s,onToggleCheckFactory:i}=e,o=a.useRef(null),l=a.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ey.Uz)(t)}),[t]),{expandedKeys:d,onToggle:c,onToggleAll:u}=(0,ef.N)(eg.y,l),h=a.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,schedules:n}=t;e.push({type:"header",repoAddress:r,scheduleCount:n.length});let s=(0,ey.Uz)(r);d.includes(s)&&n.forEach(t=>{e.push({type:"schedule",repoAddress:r,schedule:t})})}),e},[t,d]),x=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),g=(0,v.MG)({count:h.length,getScrollElement:()=>o.current,estimateSize:e=>{let t=h[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),j=g.getTotalSize(),m=g.getVirtualItems();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(_.W2,{ref:o,children:[(0,n.jsx)(eP.og,{checkbox:r}),(0,n.jsx)(_.Nh,{$totalHeight:j,children:m.map(e=>{let{index:t,key:o,size:l,start:a}=e,g=h[t];if("header"===g.type)return(0,n.jsx)(ev.vG,{repoAddress:g.repoAddress,height:l,start:a,onToggle:c,onToggleAll:u,expanded:d.includes((0,ey.Uz)(g.repoAddress)),showLocation:x.has(g.repoAddress.name),rightElement:(0,n.jsx)(ep.u,{content:1===g.scheduleCount?"1 schedule":"".concat(g.scheduleCount," schedules"),placement:"top",children:(0,n.jsx)(p.V,{children:g.scheduleCount})})},o);let j=(0,e_.g)(g.repoAddress,g.schedule.name);return(0,n.jsx)(eP.iT,{name:g.schedule.name,scheduleState:g.schedule.scheduleState,showCheckboxColumn:!!r,checked:s.has(j),onToggleChecked:i(j),repoAddress:g.repoAddress,height:l,start:a},o)})})]})})})};var eF=r(52154),eU=r(40782),e$=r(77044),eB=r(70468),eq=r(74050),eW=r(74302),eJ=r(2389),eV=r(50027),eQ=r(2949);function eD(){let e=(0,eh._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return eD=function(){return e},e}let eK=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,a.useContext)(eL.C5),i=e.length,[o,u]=(0,M.q)({queryKey:"search",defaults:{search:""}}),h=(0,eV.A)(),x=(0,eQ.g)(),p=(0,a.useMemo)(()=>[h,x],[h,x]),{button:j,activeFiltersJsx:m}=(0,eW.m)({filters:p}),f=(0,ek.aM)(eH,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:v,loading:y}=f,w=(0,C.C4)(f,C.dT),b=(0,a.useMemo)(()=>{let e=(0,eC.S)(t),r=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==v?void 0:v.workspaceOrError;return eY((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:r).filter(t=>{let{repoAddress:r}=t;return e.has((0,ey.Uz)(r))})},[v,s,t]),{state:k}=x,E=(0,a.useMemo)(()=>b.map(e=>{let{schedules:t,...r}=e;return{...r,schedules:k.size?t.filter(e=>{let{scheduleState:t}=e;return k.has(t.status)}):t}}),[b,k]),S=o.trim().toLocaleLowerCase(),T=S.length>0,A=(0,a.useMemo)(()=>{let e=S.toLocaleLowerCase();return E.map(t=>{let{repoAddress:r,schedules:n}=t;return{repoAddress:r,schedules:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{schedules:t}=e;return t.length>0})},[E,S]),L=(0,a.useMemo)(()=>A.some(e=>{let{schedules:t}=e;return t.length>0}),[A]),O=(0,a.useMemo)(()=>b.map(e=>{let{repoAddress:t,schedules:r}=e;return r.filter(e=>{let{scheduleState:t}=e;return(0,e$.i)(t)}).map(e=>{let{name:r,scheduleState:n}=e;return{repoAddress:t,scheduleName:r,scheduleState:n}})}).flat(),[b]),N=(0,a.useMemo)(()=>O.map(e=>{let{repoAddress:t,scheduleName:r}=e;return(0,e_.g)(t,r)}),[O]),[{checkedIds:I},{onToggleFactory:z,onToggleAll:_}]=(0,eF.a)(N),P=(0,a.useMemo)(()=>{let e=new Set(A.map(e=>{let{repoAddress:t,schedules:r}=e;return r.map(e=>{let{name:r}=e;return(0,e_.g)(t,r)})}).flat());return N.filter(t=>e.has(t))},[N,A]),R=(0,a.useMemo)(()=>{let e=new Set(P.filter(e=>I.has(e)));return O.filter(t=>{let{repoAddress:r,scheduleName:n}=t;return e.has((0,e_.g)(r,n))})},[P,O,I]),F=N.length>0,U=R.length,$=r&&!i&&y&&!v,B=y&&!v;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(l.x,{flex:{direction:"row",gap:12},children:[j,(0,n.jsx)(c.oi,{icon:"search",value:o,rightElement:B?(0,n.jsx)(eA.W,{tooltipContent:"Loading schedules…"}):void 0,onChange:e=>{u(e.target.value),_(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,n.jsx)(ep.u,{content:"You do not have permission to start or stop these schedules",canShow:L&&!F,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,n.jsx)(eB._,{schedules:R,onDone:()=>w.refetch()})})]}),m.length?(0,n.jsx)(l.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:m}):null,$&&!i?(0,n.jsx)(l.x,{padding:64,children:(0,n.jsx)(d.$,{purpose:"page"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eq.K,{daemonHealth:null==v?void 0:v.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),(()=>{if($)return(0,n.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(d.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:g.$()},children:"Loading schedules…"})]})});let r=e.length>t.length;return A.length?(0,n.jsx)(eR,{headerCheckbox:F?(0,n.jsx)(eJ.W,{checkedCount:U,totalCount:P.length,onToggleAll:_}):void 0,repos:A,checkedKeys:I,onToggleCheckFactory:z}):T?(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No matching schedules",description:r?(0,n.jsxs)("div",{children:["No schedules matching ",(0,n.jsx)("strong",{children:o})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No schedules matching ",(0,n.jsx)("strong",{children:o})," were found in your definitions"]})})}):(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No schedules",description:r?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})})()]})]})},eY=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,schedules:s}=t,i=(0,P.kQ)(n,e.name),o=s.map(e=>{let{name:t,scheduleState:r}=e;return{name:t,scheduleState:r}});o.length>0&&r.push({repoAddress:i,schedules:o})}return(0,eb.S)(r)},eH=(0,ek.Ps)(eD(),ez.i,eE.B,eU.O),eG=()=>((0,k.Px)(),(0,I.j)("Overview | Schedules"),(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"schedules"}),(0,n.jsx)(eK,{})]}));var eZ=r(40389),eX=r(53029);let e0=e=>{let{repos:t,headerCheckbox:r,checkedKeys:s,onToggleCheckFactory:i}=e,o=a.useRef(null),l=a.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ey.Uz)(t)}),[t]),{expandedKeys:d,onToggle:c,onToggleAll:u}=(0,ef.N)(eg.y,l),h=a.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,sensors:n}=t;e.push({type:"header",repoAddress:r,sensorCount:n.length});let s=(0,ey.Uz)(r);d.includes(s)&&n.forEach(t=>{e.push({type:"sensor",repoAddress:r,sensor:t})})}),e},[t,d]),x=(0,em.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),g=(0,v.MG)({count:h.length,getScrollElement:()=>o.current,estimateSize:e=>{let t=h[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),j=g.getTotalSize(),m=g.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(_.W2,{ref:o,children:[(0,n.jsx)(eX.KF,{checkbox:r}),(0,n.jsx)(_.Nh,{$totalHeight:j,children:m.map(e=>{let{index:t,key:o,size:l,start:a}=e,g=h[t];if("header"===g.type)return(0,n.jsx)(ev.vG,{repoAddress:g.repoAddress,height:l,start:a,onToggle:c,onToggleAll:u,expanded:d.includes((0,ey.Uz)(g.repoAddress)),showLocation:x.has(g.repoAddress.name),rightElement:(0,n.jsx)(ep.u,{content:1===g.sensorCount?"1 sensor":"".concat(g.sensorCount," sensors"),placement:"top",children:(0,n.jsx)(p.V,{children:g.sensorCount})})},o);let j=(0,eZ.x)(g.repoAddress,g.sensor.name);return(0,n.jsx)(eX.Rx,{name:g.sensor.name,sensorState:g.sensor.sensorState,showCheckboxColumn:!!r,checked:s.has(j),onToggleChecked:i(j),repoAddress:g.repoAddress,height:l,start:a},o)})})]})})};var e1=r(88257),e2=r(64265),e4=r(5409),e3=r(74548);function e5(){let e=(0,eh._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return e5=function(){return e},e}function e6(e){let t=eX.W_[e].name;return{label:t,value:{type:e,label:t},match:[t]}}let e8={[e1.dEY.ASSET]:e6(e1.dEY.ASSET),[e1.dEY.AUTO_MATERIALIZE]:e6(e1.dEY.AUTO_MATERIALIZE),[e1.dEY.AUTOMATION]:e6(e1.dEY.AUTOMATION),[e1.dEY.FRESHNESS_POLICY]:e6(e1.dEY.FRESHNESS_POLICY),[e1.dEY.MULTI_ASSET]:e6(e1.dEY.MULTI_ASSET),[e1.dEY.RUN_STATUS]:e6(e1.dEY.RUN_STATUS),[e1.dEY.STANDARD]:e6(e1.dEY.STANDARD)},e7=Object.values(e8),e9=()=>{let{allRepos:e,visibleRepos:t,loading:r,data:s}=(0,a.useContext)(eL.C5),[i,o]=(0,M.q)({queryKey:"search",defaults:{search:""}}),[u,h]=(0,M.q)({encode:e=>({sensorType:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.sensorType)||void 0===t?void 0:t.split(","))||[])}}),x=(0,eV.A)(),p=(0,eQ.g)(),j=(0,e3.im)({name:"Sensor type",allValues:e7,icon:"sensors",getStringValue:e=>e.label,state:(0,a.useMemo)(()=>new Set(Array.from(u).map(e=>e8[e].value)),[u]),renderLabel:e=>{let{value:t}=e;return(0,n.jsx)("span",{children:t.label})},onStateChanged:e=>{h(new Set(Array.from(e).map(e=>e.type)))}}),m=(0,a.useMemo)(()=>[x,p,j],[x,p,j]),{button:f,activeFiltersJsx:v}=(0,eW.m)({filters:m}),y=(0,ek.aM)(tt,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:w,loading:b}=y,k=(0,C.C4)(y,C.dT),E=(0,a.useMemo)(()=>{let e=Object.values(s).filter(e=>"WorkspaceLocationEntry"===e.__typename),r=null==w?void 0:w.workspaceOrError,n=(null==r?void 0:r.__typename)==="Workspace"?r.locationEntries:e,i=(0,eC.S)(t);return te(n).filter(e=>{let{repoAddress:t}=e;return i.has((0,ey.Uz)(t))})},[w,s,t]),{state:S}=p,T=(0,a.useMemo)(()=>E.map(e=>{let{sensors:t,...r}=e;return{...r,sensors:t.filter(e=>{let{sensorState:t,sensorType:r}=e;return(!S.size||!!S.has(t.status))&&(!u.size||!!u.has(r))})}}),[E,S,u]),A=i.trim().toLocaleLowerCase(),L=A.length>0,O=(0,a.useMemo)(()=>{let e=A.toLocaleLowerCase();return T.map(t=>{let{repoAddress:r,sensors:n}=t;return{repoAddress:r,sensors:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{sensors:t}=e;return t.length>0})},[T,A]),N=(0,a.useMemo)(()=>O.some(e=>{let{sensors:t}=e;return t.length>0}),[O]),I=(0,a.useMemo)(()=>E.map(e=>{let{repoAddress:t,sensors:r}=e;return r.filter(e=>{let{sensorState:t}=e;return(0,e$.i)(t)}).map(e=>{let{name:r,sensorState:n}=e;return{repoAddress:t,sensorName:r,sensorState:n}})}).flat(),[E]),z=(0,a.useMemo)(()=>I.map(e=>{let{repoAddress:t,sensorName:r}=e;return(0,eZ.x)(t,r)}),[I]),[{checkedIds:_},{onToggleFactory:P,onToggleAll:R}]=(0,eF.a)(z),F=(0,a.useMemo)(()=>{let e=new Set(O.map(e=>{let{repoAddress:t,sensors:r}=e;return r.map(e=>{let{name:r}=e;return(0,eZ.x)(t,r)})}).flat());return z.filter(t=>e.has(t))},[z,O]),U=(0,a.useMemo)(()=>{let e=new Set(F.filter(e=>_.has(e)));return I.filter(t=>{let{repoAddress:r,sensorName:n}=t;return e.has((0,eZ.x)(r,n))})},[F,I,_]),$=z.length>0,B=U.length,q=r&&b&&!w,W=b&&!w;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,n.jsxs)(l.x,{flex:{direction:"row",gap:12},children:[f,(0,n.jsx)(c.oi,{icon:"search",value:i,rightElement:W?(0,n.jsx)(eA.W,{tooltipContent:"Loading sensors…"}):void 0,onChange:e=>o(e.target.value),placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,n.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,n.jsx)(C.xi,{refreshState:k}),(0,n.jsx)(ep.u,{content:"You do not have permission to start or stop these schedules",canShow:N&&!$,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,n.jsx)(e2.b,{sensors:U,onDone:()=>k.refetch()})})]})]}),v.length?(0,n.jsx)(l.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:v}):null,q?(0,n.jsx)(l.x,{padding:64,children:(0,n.jsx)(d.$,{purpose:"page"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e4.F,{daemonHealth:null==w?void 0:w.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),(()=>{if(q)return(0,n.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(d.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:g.$()},children:"Loading sensors…"})]})});let r=e.length>t.length;return O.length?(0,n.jsx)(e0,{headerCheckbox:$?(0,n.jsx)(eJ.W,{checkedCount:B,totalCount:F.length,onToggleAll:R}):void 0,repos:O,checkedKeys:_,onToggleCheckFactory:P}):L?(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No matching sensors",description:r?(0,n.jsxs)("div",{children:["No sensors matching ",(0,n.jsx)("strong",{children:i})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No sensors matching ",(0,n.jsx)("strong",{children:i})," were found in your definitions"]})})}):(0,n.jsx)(l.x,{padding:{top:20},children:(0,n.jsx)(ex.t,{icon:"search",title:"No sensors",description:r?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})})()]})]})},te=e=>{let t=e.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,sensors:s}=t,i=(0,P.kQ)(n,e.name);s.length>0&&r.push({repoAddress:i,sensors:s})}return(0,eb.S)(r)},tt=(0,ek.Ps)(e5(),ez.i,eE.B,eU.O),tr=()=>((0,k.Px)(),(0,I.j)("Overview | Sensors"),(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"sensors"}),(0,n.jsx)(e9,{})]}));var tn=r(49308),ts=r(1747),ti=r(37504),to=r(93812),tl=r(76575),ta=r(28363),td=r(87803),tc=r(4733),tu=r(15332);let th=e=>{var t,r;let{setSelectedTick:s,setTableView:i,setTimerange:o,setParentStatuses:l}=e,[d,c]=(0,M.q)({queryKey:"status",defaults:{status:tc.tn.ALL}}),u=(0,a.useMemo)(()=>tc.KI[d]||tc.KI[tc.tn.ALL],[d]),{queryResult:h,paginationProps:x}=(0,tu.l)({query:to.X,variables:{statuses:(0,a.useMemo)(()=>Array.from(u),[u])},nextCursorForResult:e=>{var t;let r=e.autoMaterializeTicks;if(r.length)return null===(t=r[14])||void 0===t?void 0:t.id},getResultArray:e=>(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[],pageSize:15});return(0,C.C4)(h,1e4,!x.hasPrevCursor),(0,a.useEffect)(()=>{if(x.hasPrevCursor){var e,t,r;let n=null===(e=h.data)||void 0===e?void 0:e.autoMaterializeTicks;if(n&&n.length){let e=null===(t=n[n.length-1])||void 0===t?void 0:t.timestamp,s=null===(r=n[0])||void 0===r?void 0:r.endTimestamp;e&&s&&o([e,s])}}else o(void 0)},[x.hasPrevCursor,null===(t=h.data)||void 0===t?void 0:t.autoMaterializeTicks,o]),(0,a.useEffect)(()=>{x.hasPrevCursor?l(Array.from(u)):l(void 0)},[x.hasPrevCursor,l,u]),(0,n.jsx)(tc.Vd,{loading:h.loading,ticks:(null===(r=h.data)||void 0===r?void 0:r.autoMaterializeTicks)||[],paginationProps:x,setSelectedTick:s,setTableView:i,tickStatus:d,setTickStatus:c})};var tx=r(56130),tp=r(36803),tg=r(59502),tj=r(57758);let tm=()=>{var e;let t=(0,et.dx)(),r=(0,tx.p)(),{permissions:{canToggleAutoMaterialize:s}={}}=(0,tp.WB)(),[i,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(void 0),[h,x]=(0,a.useState)(void 0),p=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return h||c?{afterTimestamp:null==h?void 0:h[0],beforeTimestamp:null==h?void 0:h[1],statuses:c}:{afterTimestamp:(e-12e5)/1e3}},[c,h]),[j,m]=(0,ek.td)(to.X),v=(0,a.useCallback)(async()=>await j({variables:p()}),[j,p]);(0,C.bT)({refresh:v,enabled:!i&&!h&&!c,intervalMs:2e3,leading:!0});let[y,w]=(0,a.useState)(null),[b,k]=(0,M.q)((0,a.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),E=null!==(e=m.data)&&void 0!==e?e:m.previousData,S=(0,a.useMemo)(()=>(null==E?void 0:E.autoMaterializeTicks)||[],[E]),T=(0,a.useMemo)(()=>{var e;return null!==(e=null==S?void 0:S.map((e,t)=>{let r=S[t-1];if(r&&(0,tj.g6)(e,t)){let t={...e};return t.endTimestamp=r.timestamp,t.status=e1.izS.FAILURE,t}return e}))&&void 0!==e?e:[]},[JSON.stringify(S.map(e=>"".concat(e.id,":").concat(e.status)))]),A=(0,a.useCallback)(e=>{o(!!e)},[o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.x,{padding:{vertical:12,horizontal:24},children:(0,n.jsx)(td.q,{})}),(0,n.jsx)(ts.i,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Running"}),(0,n.jsx)("td",{children:t.loading?(0,n.jsx)(d.$,{purpose:"body-text"}):(0,n.jsx)(ti.X,{format:"switch",checked:!t.paused,disabled:!s,onChange:async e=>{let n=e.target.checked;n||await r({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."}),t.setPaused(!n)}})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Evaluation frequency"}),(0,n.jsx)("td",{children:"~30s"})]})]})}),(0,n.jsx)(l.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,n.jsx)(f.Tj,{children:"Evaluation timeline"})}),E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tg.p,{ticks:T,onHoverTick:A,onSelectTick:w,exactRange:h,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,n.jsx)(tl.d,{tick:y,isOpen:!!y,close:()=>{w(null)}}),"evaluations"===b?(0,n.jsx)(th,{setSelectedTick:w,setTableView:k,setParentStatuses:u,setTimerange:x}):(0,n.jsx)(ta.o,{setTableView:k})]}):(0,n.jsxs)(l.x,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,n.jsx)(d.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:g.$()},children:"Loading evaluations…"})]})]})};var tf=r(71406);let tv=()=>{let e=(0,ee.I)(),{flagLegacyNav:t}=(0,Z.gV)();switch(e){case"unknown":return(0,n.jsx)("div",{});case"has-global-amp":return(0,n.jsx)(ty,{});case"has-sensor-amp":return(0,n.jsx)(s.l_,{to:t?"/overview/sensors":"/automation"});default:(0,tf.UT)(e)}},ty=()=>((0,k.Px)(),(0,I.j)("Overview | Auto-materialize"),(0,n.jsxs)(tn.T,{children:[(0,n.jsx)(es,{tab:"amp"}),(0,n.jsx)(tm,{})]}));var tw=r(80122),tb=r(90731),tC=r(54048);function tk(){let e=(0,eh._)(["\n  query InstanceBackfillsQuery($status: BulkActionStatus, $cursor: String, $limit: Int) {\n    partitionBackfillsOrError(status: $status, cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return tk=function(){return e},e}let tE=e=>{switch(e){case e1.Jv3.CANCELED:return"Canceled";case e1.Jv3.CANCELING:return"Canceling";case e1.Jv3.COMPLETED:return"Completed";case e1.Jv3.FAILED:return"Failed";case e1.Jv3.REQUESTED:return"In progress";case e1.Jv3.COMPLETED_SUCCESS:return"Success";case e1.Jv3.COMPLETED_FAILED:return"Failed"}},tS=Object.keys(e1.Jv3).map(e=>{let t=tE(e);return{label:t,value:e,match:[e,t]}}),tT=()=>{(0,k.Px)(),(0,I.j)("Overview | Backfills");let[e,t]=(0,M.q)({encode:e=>({status:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.status)||void 0===t?void 0:t.split(","))||[])}}),r=(0,e3.im)({name:"Status",icon:"status",allValues:tS,allowMultipleSelections:!1,closeOnSelect:!0,renderLabel:e=>{let{value:t}=e;return(0,n.jsx)("div",{children:tE(t)})},getStringValue:e=>tE(e),state:e,onStateChanged:t}),{button:s,activeFiltersJsx:i}=(0,eW.m)({filters:[r]}),{queryResult:o,paginationProps:a}=(0,tu.l)({query:tA,variables:{status:e.size>0?Array.from(e)[0]:void 0},pageSize:10,nextCursorForResult:e=>{var t;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(t=e.partitionBackfillsOrError.results[9])||void 0===t?void 0:t.id:void 0},getResultArray:e=>(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}),c=(0,tC.$$)(),u=(0,C.C4)(o,C.dT),{loading:h,data:x}=o;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.x,{padding:{vertical:12,horizontal:20},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(l.x,{flex:{direction:"column",gap:8},children:[(0,n.jsx)("div",{children:s}),i]}),(0,n.jsx)(C.xi,{refreshState:u})]}),(()=>{if(h&&!x)return(0,n.jsx)(l.x,{padding:{vertical:64},flex:{direction:"column",alignItems:"center"},children:(0,n.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,n.jsx)(d.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:g.$()},children:"Loading backfills…"})]})});let t=null==x?void 0:x.partitionBackfillsOrError;return(null==t?void 0:t.__typename)==="PythonError"?(0,n.jsx)(b.T9,{error:t}):t&&(null==t?void 0:t.results.length)?(0,n.jsxs)("div",{children:[c?null:(0,n.jsx)(l.x,{padding:{horizontal:24,bottom:16},children:(0,n.jsx)(tC.So,{})}),(0,n.jsx)(tb.GQ,{backfills:t.results.slice(0,10),refetch:o.refetch}),t.results.length>0?(0,n.jsx)(l.x,{margin:{top:16},children:(0,n.jsx)(tw.b$,{...a})}):null]}):e.size>0?(0,n.jsx)(l.x,{padding:{vertical:64},children:(0,n.jsx)(ex.t,{icon:"no-results",title:"No matching backfills",description:"No backfills were found for this filter."})}):(0,n.jsx)(l.x,{padding:{vertical:64},children:(0,n.jsx)(ex.t,{icon:"no-results",title:"No backfills found",description:"This instance does not have any backfill jobs."})})})()]})},tA=(0,ek.Ps)(tk(),eE.B,tb.be),tL=()=>((0,k.Px)(),(0,I.j)("Overview | Backfills"),(0,n.jsxs)(tn.T,{children:[(0,n.jsx)(es,{tab:"backfills"}),(0,n.jsx)(tT,{})]}));var tO=r(84927),tN=r(3295),tI=r(74905),tM=r(33878),tz=r(23449),t_=r(7152),tP=r(32093),tR=r(77851);let tF=()=>{let{featureContext:e}=(0,a.useContext)(tP.U),{backfillId:t}=(0,s.UO)();(0,k.Px)(),(0,I.j)("Backfill | ".concat(t));let[r,i]=(0,M.q)({queryKey:"tab",defaults:{tab:"partitions"}}),o=(0,t_.ul)(t),c=(0,tC.$$)(),{data:h,error:x}=o,p=(null==h?void 0:h.partitionBackfillOrError.__typename)==="PartitionBackfill"?h.partitionBackfillOrError:null,j=!p||[e1.Jv3.REQUESTED,e1.Jv3.CANCELING].includes(p.status),m=(0,C.C4)(o,1e4,j);return(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(Y.m,{title:(0,n.jsxs)(f.X6,{children:[(0,n.jsx)(y.rU,{to:"/overview/backfills",style:{color:g.$()},children:"Backfills"})," / ",t]}),right:(0,n.jsxs)(l.x,{flex:{gap:12,alignItems:"center"},children:[j?(0,n.jsx)(C.xi,{refreshState:m}):null,p?(0,n.jsx)(tO.WH,{backfill:p,refetch:o.refetch,canCancelRuns:p.status===e1.Jv3.REQUESTED}):null]})}),function(){if(!h||!h.partitionBackfillOrError)return(0,n.jsx)(l.x,{padding:64,"data-testid":(0,tR.N)("page-loading-indicator"),children:(0,n.jsx)(d.$,{purpose:"page"})});if("PythonError"===h.partitionBackfillOrError.__typename)return(0,n.jsx)(b.T9,{error:h.partitionBackfillOrError});if("BackfillNotFoundError"===h.partitionBackfillOrError.__typename)return(0,n.jsx)(ex.t,{icon:"no-results",title:h.partitionBackfillOrError.message});let t=h.partitionBackfillOrError;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tM.q,{backfill:t}),c?null:(0,n.jsx)(l.x,{padding:{horizontal:24,bottom:16},children:(0,n.jsx)(tC.So,{})}),(0,n.jsx)(l.x,{padding:{left:24},border:"bottom",children:(0,n.jsxs)(G.mQ,{size:"large",selectedTabId:r,children:[(0,n.jsx)(G.OK,{id:"partitions",title:"Partitions",onClick:()=>i("partitions")}),(0,n.jsx)(G.OK,{id:"runs",title:"Runs",onClick:()=>i("runs")}),e.canSeeBackfillCoordinatorLogs?(0,n.jsx)(G.OK,{id:"logs",title:"Coordinator logs",onClick:()=>i("logs")}):null]})}),(null==x?void 0:x.graphQLErrors)&&(0,n.jsx)(u.b,{intent:"error",title:x.graphQLErrors.map(e=>e.message)}),(0,n.jsxs)(l.x,{flex:{direction:"column"},style:{flex:1,position:"relative",minHeight:0},children:["partitions"===r&&(0,n.jsx)(tN.Sl,{backfill:t}),"runs"===r&&(0,n.jsx)(tz.t,{backfill:t,view:"both"}),"logs"===r&&(0,n.jsx)(tI.o,{backfill:t})]})]})}()]})},tU=()=>{let{flagLegacyNav:e}=(0,Z.gV)(),t=(0,ee.I)();return(0,n.jsxs)(s.rs,{children:[(0,n.jsx)(eo.A,{path:"/overview/activity",isNestingRoute:!0,children:(0,n.jsx)(ed,{})}),(0,n.jsx)(eo.A,{path:"/overview/jobs",render:()=>e?(0,n.jsx)(eu,{}):(0,n.jsx)(s.l_,{to:"/jobs"})}),(0,n.jsx)(eo.A,{path:"/overview/schedules",render:()=>e?(0,n.jsx)(eG,{}):(0,n.jsx)(s.l_,{to:"/automation"})}),(0,n.jsx)(eo.A,{path:"/overview/sensors",render:()=>e?(0,n.jsx)(tr,{}):(0,n.jsx)(s.l_,{to:"/automation"})}),(0,n.jsx)(eo.A,{path:"/overview/automation",render:()=>e||"has-global-amp"===t?(0,n.jsx)(tv,{}):(0,n.jsx)(s.l_,{to:"/automation"})}),(0,Z.vR)(i.T.flagRunsFeed)?null:[(0,n.jsx)(eo.A,{path:"/overview/backfills/:backfillId",render:()=>(0,n.jsx)(tF,{})},"1"),(0,n.jsx)(eo.A,{path:"/overview/backfills",exact:!0,render:()=>(0,n.jsx)(tL,{})},"2")],(0,n.jsx)(eo.A,{path:"/overview/resources",children:(0,n.jsx)(eN,{})}),(0,n.jsx)(eo.A,{path:"*",isNestingRoute:!0,render:()=>(0,n.jsx)(s.l_,{to:"/overview/activity"})})]})};var t$=tU},907:function(e,t,r){r.d(t,{S:function(){return s}});var n=r(22563);let s=e=>[...e].sort((e,t)=>{let r=(0,n.Uz)(e.repoAddress),s=(0,n.Uz)(t.repoAddress);return r.localeCompare(s)})},49455:function(e,t,r){r.d(t,{S:function(){return i}});var n=r(65822),s=r(22563);let i=e=>new Set(e.map(e=>(0,s.Uz)((0,n.kQ)(e.repository.name,e.repositoryLocation.name))))}}]);
//# sourceMappingURL=5654.770a28763f429eae.js.map