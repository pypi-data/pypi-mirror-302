image: python:3.9

stages:
  - format
  - test
  - security

before_script:
  - python3 setup.py install
  - python3 -m pip install genbase_test_helpers

flake8:
  stage: format
  script:
    - flake8 . --config .flake8

isort:
  stage: format
  script:
    - python3 -m isort --check --line-length 120 --diff text_explainability

run_tests:
  stage: test
  script:
    - python3 -m pytest

  only:
    - master
    - branches
  artifacts:
    when: always

bandit:
  stage: security
  script:
    - bandit -r ./text_explainability -x /test
