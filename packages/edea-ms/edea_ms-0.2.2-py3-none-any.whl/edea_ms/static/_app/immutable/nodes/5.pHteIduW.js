import{o as Q}from"../chunks/helpers.3e4UBEvQ.js";import{e as U}from"../chunks/index.NkaAmagH.js";import{s as W,f as T,a as A,g as C,h as y,Z as X,c as B,d as b,j as R,i as I,B as h,a0 as V,L as x,o as ee,l as P,m as S,n as w,e as q,r as N}from"../chunks/scheduler.E6X4giYD.js";import{S as te,i as ae,a as z,c as J,t as H,g as K,b as re,d as le,m as ne,e as oe}from"../chunks/index.2ZayTLG1.js";import{e as L,j as se,m as ie}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.TlH1isqv.js";import{w as ue}from"../chunks/singletons.YLCiVgCN.js";import{V as ce}from"../chunks/VegaLite.JcqJEDPk.js";const fe=async({fetch:c,url:e})=>{let a=e.searchParams.get("id"),r=e.searchParams.get("testruns")?.split(",").sort();const d=await c("/api/projects/"+a).then(i=>(i.ok||U(i.status,i.statusText),i.json()));let s=[];if(r)for(var l of r){const{run:i,measurements:n}=await Q(c,l);s.push({run:i,measurements:n})}return{project:d,runs:s}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));function Y(c,e,a){const r=c.slice();return r[4]=e[a],r}function Z(c,e,a){const r=c.slice();return r[4]=e[a],r}function F(c){let e,a,r=c[4].run.id+"",d,s,l=c[4].run.short_code+"",i;return{c(){e=T("th"),a=P("ID: "),d=P(r),s=P(", SC: "),i=P(l)},l(n){e=C(n,"TH",{});var u=y(e);a=S(u,"ID: "),d=S(u,r),s=S(u,", SC: "),i=S(u,l),u.forEach(b)},m(n,u){I(n,e,u),h(e,a),h(e,d),h(e,s),h(e,i)},p(n,u){u&1&&r!==(r=n[4].run.id+"")&&w(d,r),u&1&&l!==(l=n[4].run.short_code+"")&&w(i,l)},d(n){n&&b(e)}}}function _e(c){let e,a,r=c[4].run.id+"",d;return{c(){e=T("p"),a=P("no viz for "),d=P(r)},l(s){e=C(s,"P",{});var l=y(e);a=S(l,"no viz for "),d=S(l,r),l.forEach(b)},m(s,l){I(s,e,l),h(e,a),h(e,d)},p(s,l){l&1&&r!==(r=s[4].run.id+"")&&w(d,r)},i:N,o:N,d(s){s&&b(e)}}}function de(c){let e,a,r,d,s=c[4].run.id+"",l,i,n,u,E,j=c[4].run.started_at+"",m,D,f=c[4].run.completed_at+"",$,o,_,t,g;return _=new ce({props:{data:{measurements:c[4].measurements},spec:c[4].run.data?.vega_lite,options:c[1]}}),{c(){e=T("td"),a=T("p"),r=T("a"),d=P("Run "),l=P(s),n=A(),u=T("p"),E=P("Started at "),m=P(j),D=P(", completed at "),$=P(f),o=A(),re(_.$$.fragment),t=A(),this.h()},l(p){e=C(p,"TD",{});var v=y(e);a=C(v,"P",{});var k=y(a);r=C(k,"A",{href:!0});var M=y(r);d=S(M,"Run "),l=S(M,s),M.forEach(b),k.forEach(b),n=B(v),u=C(v,"P",{});var O=y(u);E=S(O,"Started at "),m=S(O,j),D=S(O,", completed at "),$=S(O,f),O.forEach(b),o=B(v),le(_.$$.fragment,v),t=B(v),v.forEach(b),this.h()},h(){R(r,"href",i="/testruns/"+c[4].run.id)},m(p,v){I(p,e,v),h(e,a),h(a,r),h(r,d),h(r,l),h(e,n),h(e,u),h(u,E),h(u,m),h(u,D),h(u,$),h(e,o),ne(_,e,null),h(e,t),g=!0},p(p,v){(!g||v&1)&&s!==(s=p[4].run.id+"")&&w(l,s),(!g||v&1&&i!==(i="/testruns/"+p[4].run.id))&&R(r,"href",i),(!g||v&1)&&j!==(j=p[4].run.started_at+"")&&w(m,j),(!g||v&1)&&f!==(f=p[4].run.completed_at+"")&&w($,f);const k={};v&1&&(k.data={measurements:p[4].measurements}),v&1&&(k.spec=p[4].run.data?.vega_lite),v&2&&(k.options=p[1]),_.$set(k)},i(p){g||(z(_.$$.fragment,p),g=!0)},o(p){H(_.$$.fragment,p),g=!1},d(p){p&&b(e),oe(_)}}}function G(c){let e,a,r,d;const s=[de,_e],l=[];function i(n,u){return n[4].run.data?.vega_lite?0:1}return e=i(c),a=l[e]=s[e](c),{c(){a.c(),r=q()},l(n){a.l(n),r=q()},m(n,u){l[e].m(n,u),I(n,r,u),d=!0},p(n,u){let E=e;e=i(n),e===E?l[e].p(n,u):(K(),H(l[E],1,1,()=>{l[E]=null}),J(),a=l[e],a?a.p(n,u):(a=l[e]=s[e](n),a.c()),z(a,1),a.m(r.parentNode,r))},i(n){d||(z(a),d=!0)},o(n){H(a),d=!1},d(n){n&&b(r),l[e].d(n)}}}function he(c){let e,a,r="Compare testruns",d,s,l,i,n,u,E,j=L(c[0].runs),m=[];for(let o=0;o<j.length;o+=1)m[o]=F(Z(c,j,o));let D=L(c[0].runs),f=[];for(let o=0;o<D.length;o+=1)f[o]=G(Y(c,D,o));const $=o=>H(f[o],1,1,()=>{f[o]=null});return{c(){e=T("div"),a=T("h2"),a.textContent=r,d=A(),s=T("table"),l=T("thead");for(let o=0;o<m.length;o+=1)m[o].c();i=A(),n=T("tbody"),u=T("tr");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=C(o,"DIV",{class:!0});var _=y(e);a=C(_,"H2",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-2ihjxu"&&(a.textContent=r),d=B(_),s=C(_,"TABLE",{class:!0});var t=y(s);l=C(t,"THEAD",{});var g=y(l);for(let k=0;k<m.length;k+=1)m[k].l(g);g.forEach(b),i=B(t),n=C(t,"TBODY",{});var p=y(n);u=C(p,"TR",{});var v=y(u);for(let k=0;k<f.length;k+=1)f[k].l(v);v.forEach(b),p.forEach(b),t.forEach(b),_.forEach(b),this.h()},h(){R(a,"class","h2"),R(s,"class","table table-hover"),R(e,"class","container mx-auto p-8 space-y-8")},m(o,_){I(o,e,_),h(e,a),h(e,d),h(e,s),h(s,l);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(l,null);h(s,i),h(s,n),h(n,u);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(u,null);E=!0},p(o,[_]){if(_&1){j=L(o[0].runs);let t;for(t=0;t<j.length;t+=1){const g=Z(o,j,t);m[t]?m[t].p(g,_):(m[t]=F(g),m[t].c(),m[t].m(l,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=j.length}if(_&3){D=L(o[0].runs);let t;for(t=0;t<D.length;t+=1){const g=Y(o,D,t);f[t]?(f[t].p(g,_),z(f[t],1)):(f[t]=G(g),f[t].c(),z(f[t],1),f[t].m(u,null))}for(K(),t=D.length;t<f.length;t+=1)$(t);J()}},i(o){if(!E){for(let _=0;_<D.length;_+=1)z(f[_]);E=!0}},o(o){f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)H(f[_]);E=!1},d(o){o&&b(e),V(m,o),V(f,o)}}}function me(c,e,a){let r,{data:d}=e,l=ue({theme:void 0,actions:{export:!0,source:!1,compiled:!0,editor:!1}});return x(c,l,i=>a(1,r=i)),ee(async()=>{l.update(i=>(i.theme=se()?void 0:"dark",i))}),ie.subscribe(i=>{l.update(n=>(n.theme=i?void 0:"dark",n))}),c.$$set=i=>{"data"in i&&a(0,d=i.data)},[d,r,l]}class Ce extends te{constructor(e){super(),ae(this,e,me,he,W,{data:0})}}export{Ce as component,Te as universal};
