Metadata-Version: 2.1
Name: python-oauth-token-manager
Version: 0.5.3
Summary: API for managing stored OAuth credentials.
Author-email: David Harcombe <david.harcombe@gmail.com>
License: Apache 2.0
Project-URL: Homepage, https://github.com/googleworkspace/python-oauth-token-manager
Project-URL: Bug Tracker, https://github.com/googleworkspace/python-oauth-token-manager/issues
Classifier: Programming Language :: Python :: 3
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: dataclasses-json >=0.5.2
Requires-Dist: decorator >=4.4.2
Requires-Dist: gcs-oauth2-boto-plugin >=2.7
Requires-Dist: gcsfs >=0.7.2
Requires-Dist: google-api-core >=1.26.1
Requires-Dist: google-api-python-client >=2.0.2
Requires-Dist: google-auth-httplib2 >=0.1.0
Requires-Dist: google-auth-oauthlib >=0.4.3
Requires-Dist: google-auth >=1.28.0
Requires-Dist: google-cloud-core >=1.6.0
Requires-Dist: google-cloud-firestore >=2.0.2
Requires-Dist: google-cloud-secret-manager >=2.8.0
Requires-Dist: google-cloud-storage >=1.36.2
Requires-Dist: google-reauth >=0.1.1
Requires-Dist: googleapis-common-protos >=1.53.0
Requires-Dist: httplib2 >=0.19.0
Requires-Dist: oauth2client >=4.1.3
Requires-Dist: oauthlib >=3.1.0
Requires-Dist: pytz >=2021.1
Requires-Dist: requests-oauthlib >=1.3.0
Requires-Dist: requests >=2.27.1

# Python Library for storing OAuth credentials in many locations

## What's this for?

By their very nature, OAuth credentials are valuable and dangerous, and have
to be stored securely. As a result, the same tasks to store these tokens in a
simple and secure fashion have to be written each time, or copied and pasted
around - leading to potential issues as problems are found and not fixed
in all places.

This library will store OAuth tokens in any of the following places:

1. Secret Manager
1. Firestore
1. Google Cloud Storage files
1. A local `json` file

Other storage locations can be added at will simply by forking this library and
extending the appropriate abstract classes.


## Initial Setup And Installation

## 


## Examples

### Fetching a token from storage

```
from auth.credentials_helpers import encode_key
from auth.secret_manager import SecretManager

manager = SecretManager(project='<gcp project name>')
key = manager.get_document(encode_key('<token id>'))
```

Note the use of `encode_key`. This is because many of the storage systems
supported do not allow special characters, and the most convenient identifier
for most OAuth tokens is the email address of the user. `encode_key` is a
base64 encoder - and no decoding is necessary.

The example given uses Secret Manager (part of Google Cloud). To use (say) GCS,
the code would change like this:

```
from auth.credentials_helpers import encode_key
from auth.gcs_datastore import GCSDatastore

manager = GCSDatastore(project='<gcp project name>', bucket='<gcs bucket>')
key = manager.get_document(encode_key('<token id>'))
```

All that changes is where the datastore is!

### Storing a token in Secret Manager

```
from auth.secret_manager import SecretManager
manager = SecretManager(project='<gcp project name>')

manager.update_document(id=encode_key('<token_id>'), new_data=<token string>)
```

This will implicitly create a `secret` if there was not one already, or simply
update an existing secret with a new 'live' version of the secret.

### Listing all the available secrets

```
from auth.secret_manager import SecretManager
manager = SecretManager(project='<gcp project name>')

manager.list_documents()
```


### Removing a secret

```
from auth.secret_manager import SecretManager
manager = SecretManager(project='<gcp project name>')

manager.delete_document(id=encode_key('<token_id>'))
```
