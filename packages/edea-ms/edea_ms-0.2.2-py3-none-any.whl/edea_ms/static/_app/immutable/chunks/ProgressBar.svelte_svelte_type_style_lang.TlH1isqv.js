import{a as A,t as H}from"./index.2ZayTLG1.js";import{P as N,v as O}from"./scheduler.E6X4giYD.js";import{n as v,w as R,m as j}from"./singletons.YLCiVgCN.js";function G(e){return e?.length!==void 0?e:Array.from(e)}function z(e,t){H(e,1,1,()=>{t.delete(e.key)})}function K(e,t){e.f(),z(e,t)}function X(e,t,n,a,u,h,r,g,w,d,l,_){let o=e.length,m=h.length,f=o;const S={};for(;f--;)S[e[f].key]=f;const M=[],P=new Map,L=new Map,k=[];for(f=m;f--;){const s=_(u,h,f),c=n(s);let i=r.get(c);i?a&&k.push(()=>i.p(s,t)):(i=d(c,s),i.c()),P.set(c,M[f]=i),c in S&&L.set(c,Math.abs(f-S[c]))}const C=new Set,b=new Set;function y(s){A(s,1),s.m(g,l),r.set(s.key,s),l=s.first,m--}for(;o&&m;){const s=M[m-1],c=e[o-1],i=s.key,p=c.key;s===c?(l=s.first,o--,m--):P.has(p)?!r.has(i)||C.has(i)?y(s):b.has(p)?o--:L.get(i)>L.get(p)?(b.add(i),y(s)):(C.add(p),o--):(w(c,r),o--)}for(;o--;){const s=e[o];P.has(s.key)||w(s,r)}for(;m;)y(M[m-1]);return N(k),M}const Y=v("goto"),Z=v("invalidate_all"),$=v("before_navigate"),ee=v("after_navigate"),E={};function I(e){return e==="local"?localStorage:sessionStorage}function U(e,t,n){const a=n?.serializer??JSON,u=n?.storage??"local";function h(r,g){I(u).setItem(r,a.stringify(g))}if(!E[e]){const r=R(t,d=>{const l=I(u).getItem(e);l&&d(a.parse(l));{const _=o=>{o.key===e&&d(o.newValue?a.parse(o.newValue):null)};return window.addEventListener("storage",_),()=>window.removeEventListener("storage",_)}}),{subscribe:g,set:w}=r;E[e]={set(d){h(e,d),w(d)},update(d){const l=d(O(r));h(e,l),w(l)},subscribe:g}}return E[e]}const D=U("modeOsPrefers",!1),V=U("modeUserPrefers",void 0),Q=U("modeCurrent",!1);function q(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return D.set(e),e}function J(){return O(V)}function te(){const e=q(),t=J();return t!==void 0?t:e}function se(e){V.set(e)}function ne(e){const t=document.documentElement.classList,n="dark";e===!0?t.remove(n):t.add(n),Q.set(e)}function oe(){const e=document.documentElement.classList,t=localStorage.getItem("modeUserPrefers")==="false",n=!("modeUserPrefers"in localStorage),a=window.matchMedia("(prefers-color-scheme: dark)").matches;t||n&&a?e.add("dark"):e.remove("dark")}function ae(){const e=window.matchMedia("(prefers-color-scheme: light)");function t(n){const a=document.documentElement.classList,u="dark";n===!0?a.remove(u):a.add(u)}t(e.matches),e.onchange=()=>{t(e.matches)}}const x="(prefers-reduced-motion: reduce)";function T(){return window.matchMedia(x).matches}const re=j(T(),e=>{{const t=a=>{e(a.matches)},n=window.matchMedia(x);return n.addEventListener("change",t),()=>{n.removeEventListener("change",t)}}});export{ne as a,$ as b,se as c,ae as d,G as e,K as f,q as g,Y as h,Z as i,te as j,ee as k,Q as m,re as p,oe as s,X as u};
