"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4063],{6660:(e,a,t)=>{t.r(a),t.d(a,{default:()=>F});var s=t(641),l=t(33);const o={class:"card"},i={class:"card-body"},d={class:"row"},g={class:"col-md-4"},n={class:"text-instructions"},r={class:"col-md-8 tag-list"},c=["onDblclick"],u=["onClick"],h={class:"row submit-row"},T={class:"col-md-12"};var p=t(2243),m=t(9336),k=t(2321),b=t(3751);const C={class:"modal fade",id:"editTagModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editTagModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},f={class:"modal-content"},y={class:"modal-body"},x={class:"row"},L={class:"col-md-8"},_={key:0,class:"error"},w=["disabled"],M={class:"row"},A={class:"col-md-8"},I={class:"form-group"},N={class:"form-group"},U={class:"modal-footer"},$=["disabled"];var E=t(2124);const S={name:"EditTagModal",components:{NColorPicker:t(9979).A},props:{existingTags:{type:Array,default:()=>[]},tagColour:{type:String,default:""},tagId:{type:Number,default:0},tagName:{type:String,default:""},tagTextColour:{type:String,default:""}},data(){return{tagColourModel:this.tagColour,tagNameModel:this.tagName,tagTextColourModel:this.tagTextColour}},watch:{tagColour(){this.tagColourModel=this.tagColour},tagName(){this.tagNameModel=this.tagName},tagTextColour(){this.tagTextColourModel=this.tagTextColour}},computed:{...(0,E.L8)({rootUrl:"getRootUrl",userLevel:"getUserLevel"}),canSave(){return 0===this.existingTags.filter((e=>e.fields.tag_name.toUpperCase()===this.tagNameModel.toUpperCase()&&e.pk!==this.tagId)).length}},methods:{deleteTag(){this.axios.post(`${this.rootUrl}tag/delete/${this.tagId}/`).then((()=>{this.$emit("delete_tag",{tag_id:this.tagId}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error deleting tag",message:`Sorry we could not delete your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getClasses(e){let a="single-colour";return e===this.tagColourModel&&(a=`${a} selected-colour`),a},newTag(e){this.$store.dispatch("newToast",{header:"New Tag",message:"Creating new Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/new/`,e).then((e=>{this.$store.dispatch("newToast",{header:"Tag Saved",message:"Tag has been successfully saved",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("new_tag",e.data),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new tag",message:`Sorry, we could not create your new tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},saveTag(){const e=new FormData;e.set("tag_id",this.tagId),e.set("tag_name",this.tagNameModel),e.set("tag_colour",this.tagColourModel),e.set("tag_text_colour",this.tagTextColourModel),0===this.tagId?this.newTag(e):this.updateTag(e)},updateColour(e){this.tagColourModel=e},updateTag(e){this.$store.dispatch("newToast",{header:"Updating Tag",message:"Updating Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Tag Updated",message:"Tag has been updated successfully",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("update_tags",{tag_id:this.tagId,tag_name:this.tagNameModel,tag_colour:this.tagColourModel,tag_text_colour:this.tagTextColourModel}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not update tag",message:`Sorry, we could not update your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var R=t(6262);const D={name:"SearchTags",components:{EditTagModal:(0,R.A)(S,[["render",function(e,a,t,o,i,d){const g=(0,s.g2)("n-color-picker");return(0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",v,[(0,s.Lk)("div",f,[a[13]||(a[13]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"editTagModalLabel"}," Edit Tag "),(0,s.Lk)("button",{type:"button",id:"editTagCloseModal",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,s.Lk)("div",y,[(0,s.Lk)("div",x,[a[6]||(a[6]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Edit Tags"),(0,s.Lk)("p",{class:"text-instructions"}," Please give the tag an appropriate name. Please do not pick an existing tag name. ")],-1)),(0,s.Lk)("div",L,[(0,s.Lk)("label",null,[a[5]||(a[5]=(0,s.eW)(" Tag Name ")),d.canSave?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("span",_," Please use a unique name "))]),(0,s.bo)((0,s.Lk)("input",{class:"form-control",disabled:e.userLevel<=1,"onUpdate:modelValue":a[0]||(a[0]=e=>i.tagNameModel=e)},null,8,w),[[b.vModelText,i.tagNameModel]])])]),a[11]||(a[11]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",M,[a[10]||(a[10]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Pick Colour"),(0,s.Lk)("p",{class:"text-instructions"}," Please choose a background and text colour for your tag. ")],-1)),(0,s.Lk)("div",A,[(0,s.Lk)("div",I,[a[7]||(a[7]=(0,s.Lk)("label",null,"Background Colour",-1)),(0,s.bF)(g,{"show-alpha":!1,disabled:e.userLevel<=1,value:i.tagColourModel,"onUpdate:value":a[1]||(a[1]=e=>i.tagColourModel=e),modes:["hex"]},null,8,["disabled","value"])]),(0,s.Lk)("div",N,[a[8]||(a[8]=(0,s.Lk)("label",null,"Text Colour",-1)),(0,s.bF)(g,{value:i.tagTextColourModel,"onUpdate:value":a[2]||(a[2]=e=>i.tagTextColourModel=e),disabled:e.userLevel<=1,"show-alpha":!1,modes:["hex"]},null,8,["value","disabled"]),(0,s.Lk)("span",null,(0,l.toDisplayString)(i.tagTextColourModel),1)]),a[9]||(a[9]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",{class:"single-tag",style:(0,l.normalizeStyle)(`margin-right:0;background-color:${i.tagColourModel};color:${i.tagTextColourModel};`)},(0,l.toDisplayString)(i.tagNameModel),5)])])]),(0,s.Lk)("div",U,[0!==t.tagId&&e.userLevel>1?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",class:"btn btn-danger delete-tag",onClick:a[3]||(a[3]=(...e)=>d.deleteTag&&d.deleteTag(...e))}," Delete Tag ")):(0,s.Q3)("v-if",!0),a[12]||(a[12]=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),e.userLevel>1?((0,s.uX)(),(0,s.CE)("button",{key:1,type:"button",class:"btn btn-primary",disabled:!d.canSave,onClick:a[4]||(a[4]=(...e)=>d.saveTag&&d.saveTag(...e))}," Save Tag ",8,$)):(0,s.Q3)("v-if",!0)])])])])}]]),Icon:k.In},props:{rootUrl:{type:String,default:"/"},tagResults:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data(){return{singleTagColour:"",singleTagId:0,singleTagName:"#37cbd2",singleTagTextColour:"#ffffff",localTagResults:this.tagResults}},mixins:[p.A],methods:{addTag(){this.singleTagName="default tag",this.singleTagId=0,this.singleTagColour="#37cbd2",this.singleTagTextColour="#ffffff",new m.aF(document.getElementById("editTagModal")).show()},deleteTag(e){this.localTagResults=this.localTagResults.filter((a=>a.pk!==e.tag_id))},editTag(e){const a=this.localTagResults.filter((a=>a.pk===e))[0];this.singleTagName=a.fields.tag_name,this.singleTagId=e,this.singleTagColour=a.fields.tag_colour,this.singleTagTextColour=a.fields.tag_text_colour,new m.aF(document.getElementById("editTagModal")).show()},newTag(e){this.localTagResults.push(e[0])},updateTags(e){const a=this.localTagResults.findIndex((a=>a.pk===e.tag_id));this.localTagResults[a].fields.tag_name=e.tag_name,this.localTagResults[a].fields.tag_colour=e.tag_colour,this.localTagResults[a].fields.tag_text_colour=e.tag_text_colour}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},F=(0,R.A)(D,[["render",function(e,a,t,p,m,k){const b=(0,s.g2)("Icon"),C=(0,s.g2)("edit-tag-modal");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",i,[a[8]||(a[8]=(0,s.Lk)("h1",null,"Search Tags",-1)),a[9]||(a[9]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",d,[(0,s.Lk)("div",g,[a[4]||(a[4]=(0,s.Lk)("strong",null,"Tags",-1)),a[5]||(a[5]=(0,s.Lk)("p",{class:"text-instructions"}," Use the search bar to help you find any tags. ",-1)),(0,s.Lk)("p",n,[a[2]||(a[2]=(0,s.eW)(" Click on the icon ")),(0,s.bF)(b,{icon:e.icons.infoCircle},null,8,["icon"]),a[3]||(a[3]=(0,s.eW)(" to edit the tag. "))]),a[6]||(a[6]=(0,s.Lk)("p",{class:"text-instructions"},' To add in any new tags - please click on the "New Tag" button. ',-1))]),(0,s.Lk)("div",r,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.localTagResults,(a=>((0,s.uX)(),(0,s.CE)("div",{key:a.pk,style:(0,l.normalizeStyle)(`background-color: ${a.fields.tag_colour};color: ${a.fields.tag_text_colour}`),onDblclick:e=>k.editTag(a.pk),class:"single-tag"},[(0,s.eW)((0,l.toDisplayString)(a.fields.tag_name)+" ",1),(0,s.Lk)("span",{onClick:e=>k.editTag(a.pk)},[(0,s.bF)(b,{icon:e.icons.infoCircle},null,8,["icon"])],8,u)],44,c)))),128))]),(0,s.Q3)(" ADD NEW TAG BUTTON "),a[7]||(a[7]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",h,[(0,s.Lk)("div",T,[t.userLevel>=2?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:a[0]||(a[0]=(...e)=>k.addTag&&k.addTag(...e))},"Add Tag")):(0,s.Q3)("v-if",!0)])])]),(0,s.Q3)(" MODALS "),(0,s.bF)(C,{"existing-tags":m.localTagResults,"tag-colour":m.singleTagColour,"tag-id":m.singleTagId,"tag-name":m.singleTagName,"tag-text-colour":m.singleTagTextColour,onNew_tag:k.newTag,onDelete_tag:a[1]||(a[1]=e=>k.deleteTag(e)),onUpdate_tags:k.updateTags},null,8,["existing-tags","tag-colour","tag-id","tag-name","tag-text-colour","onNew_tag","onUpdate_tags"])])])}]])},2243:(e,a,t)=>{t.d(a,{A:()=>A});var s=t(8998),l=t(102),o=t(9394),i=t(2438),d=t(9605),g=t(3438),n=t(5666),r=t(6375),c=t(1647),u=t(7066),h=t(4397),T=t(4603),p=t(7432),m=t(1758),k=t(8959),b=t(9587),C=t(9675),v=t(386),f=t(6120),y=t(8086),x=t(5617),L=t(6325),_=t(6500),w=t(5707),M=t(1511);const A={data:()=>({icons:{arrowUp:s.A,bugIcon:l.A,bxBriefcase:o.A,cardChecklist:i.A,clipboardIcon:d.A,documentPdf:g.A,documentText:n.A,folderIcon:r.A,groupPresentation:c.A,imageIcon:u.A,infoCircle:h.A,linkIcon:T.A,linkIcon2:p.A,linkOut:m.A,mailIcon:k.A,microsoftExcel:b.A,microsoftPowerpoint:C.A,microsoftWord:v.A,noteAdd:f.A,objectStorage:y.A,passwordIcon:x.A,trashCan:L.A,userIcon:_.A,usersIcon:w.A,xCircle:M.A}})}}}]);