(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[5796],{45796:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var n=a(74389),r=a(31529),i=a(93345),o=a(60162),s=a.n(o),d=a(4926),l=a(48113),u=a(83889),g=a(96133),h=a(88714),y=a(88085),c=a(73229),f=a(23607),m=a(88561),C=a(11465),p=a(88409),w=a(18583);const b=(0,r.debounce)((({visibleRange:e,chunkSizes:t,data:a,widgetName:n,onQueryRangesChanged:r})=>{if(!t)return;const i={};let o=!1;(0,C.W)(t).forEach((([r,s])=>{if(void 0===s)throw new Error(`Undefined chunkSize for the axis "${r}" in the lazy loading configuration of "${n}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const d=m.axisIds[r],l=a.axes.find((e=>e.id===d)),u=l?.range,g=e[r].from,h=e[r].to;if(!u||u.entireAxis)i[d]={from:0,to:s-1};else if(g>=u.from&&h<=u.to)i[d]={from:u.from,to:u.to};else{const e=g+Math.floor((h-g)/2),t=Math.max(0,Math.min(u.axisLength-s,e-Math.ceil(s/2))),a=Math.min(t+s,u.axisLength);i[d]={from:t,to:a},o=o||t!==u.from||a!==u.to}})),o&&r(i)}),300),S=e=>{const{data:t,widgetState:a,onQueryRangesChanged:r}=e,o=a.switchedTo??a.widgetKey,[s]=(0,c.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,p.useWidgetName)(a),u=(0,i.useCallback)((e=>b({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:r})),[d,t,l,r]);return(0,n.Y)(w.p,{...e,onVisibleRangeChanged:u})};var v=a(95459),x=a(56745);const W=e=>e,k=(0,i.memo)((e=>{(0,v.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:a,widgetState:r,onChange:o}=e,{widgetKey:s}=e.widgetState,[l]=(0,c.useWidgetPlugins)([s]),m=(0,p.useWidgetName)(r);(0,i.useMemo)((()=>{(0,g.K)(m,r.style?.measures)}),[r.style?.measures,m]);const[C]=(0,h.W0)([l?.cell]),[w]=(0,y.n6)([l?.cellStyle]),b=(0,i.useCallback)((w?.withCellStyle??W)(C?.Cell??f.Y),[C,w]);b.displayName="WithCellStyle";const k=(0,p.useFilters)(r),R=(0,i.useMemo)((()=>Object.values(k).some((e=>e.some(u.t)))),[k]),z=(0,i.useMemo)((()=>!(0,d.isCellSetEmpty)(t.data)),[t.data]);if((0,p.isMappingEmpty)(r.mapping)&&!R)return(0,n.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,d.isErrorInQueryResultOfType)(t.error,"QueryTimeoutException"))throw new d.QueryTimeoutError(t.error);throw new d.QueryError(t.error)}return(0,n.Y)(p.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&z?(0,n.Y)(S,{Cell:b,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:o,onSelectionChange:a,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,n.Y)(x.M,{size:e.widgetState.style?.size,style:e.style,...0===t.data?.cells.length?{reason:"noData",widgetState:r,onStateChange:o}:{reason:"noQuery"}})})}),((e,t)=>{if((0,p.isWidgetInDashboard)(t)!==(0,p.isWidgetInDashboard)(e))return!1;if((0,p.isWidgetInDashboard)(t)&&(0,p.isWidgetInDashboard)(e)){const{dashboardState:a,...n}=(0,r.omit)(e,"onDashboardChange"),{dashboardState:i,...o}=(0,r.omit)(t,"onDashboardChange"),d=(0,l.W)(a,e.pageKey),u=(0,l.W)(i,t.pageKey);return s()(n,o)&&a.filters===i.filters&&d?.filters===u?.filters&&a.queryContext===i.queryContext&&d?.queryContext===u?.queryContext}return s()(e,t)}))},60162:e=>{e.exports=function(e,t,a,n){var r=a?a.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var u=e[l],g=t[l];if(!1===(r=a?a.call(n,u,g,l):void 0)||void 0===r&&u!==g)return!1}return!0}}}]);