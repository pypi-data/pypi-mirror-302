"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8346],{59672:function(e,t,n){n.r(t),n.d(t,{MergedAutomationRoot:function(){return eN},default:function(){return ek}});var s=n(52322),o=n(14934),r=n(45774),a=n(37483),i=n(35292),l=n(63019),c=n(39013),d=n(74580),u=n(74159),h=n(35002),p=n(2784),m=n(55010),x=n(60603),j=n(38491),g=n(15358),f=n(34147),y=n(92506),v=n(20958),S=n(71406),w=n(54724),b=n(94062),E=n(99417),C=n(89398);let N=e=>{let{openWithIntent:t,onClose:n,onComplete:o,automations:r}=e,a=r.length,[i,d]=(0,w.s)();(0,p.useEffect)(()=>{"not-open"===t&&d({type:"reset"})},[t,d]);let[u]=(0,v.Db)(C.VE),[h]=(0,v.Db)(C.Xu),[m]=(0,v.Db)(E.Wz),[x]=(0,v.Db)(E.d0),N=async e=>{let{repoAddress:t,name:n,type:s}=e,o={repositoryLocationName:t.location,repositoryName:t.name};switch(s){case"sensor":{let{data:e}=await u({variables:{sensorSelector:{...o,sensorName:n}}});switch(null==e?void 0:e.startSensor.__typename){case"Sensor":d({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":d({type:"update-error",name:n,error:e.startSensor.message})}break}case"schedule":{let{data:e}=await m({variables:{scheduleSelector:{...o,scheduleName:n}}});switch(null==e?void 0:e.startSchedule.__typename){case"ScheduleStateResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:n,error:e.startSchedule.message})}break}default:(0,S.UT)(s)}},k=async e=>{let{name:t,type:n,instigationState:s}=e,o={id:s.id};switch(n){case"sensor":{let{data:e}=await h({variables:o});switch(null==e?void 0:e.stopSensor.__typename){case"StopSensorMutationResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:t,error:e.stopSensor.message})}break}case"schedule":{let{data:e}=await x({variables:o});switch(null==e?void 0:e.stopRunningSchedule.__typename){case"ScheduleStateResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:t,error:e.stopRunningSchedule.message})}break}default:(0,S.UT)(n)}},_=async()=>{if("not-open"!==t){for(let e of(d({type:"start"}),r))"start"===t?await N(e):await k(e);d({type:"complete"}),o()}},T="updating"!==i.step;return(0,s.jsxs)(y.Vq,{isOpen:"not-open"!==t,title:"start"===t?"Start automations":"Stop automations",canEscapeKeyClose:T,canOutsideClickClose:T,onClose:n,children:[(0,s.jsx)(y.a7,{children:(0,s.jsxs)(f.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===t)return null;switch(i.step){case"initial":if("stop"===t)return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be stopped. Do you want to continue?")});return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be started. Do you want to continue?")});case"updating":case"completed":let e=a>0?i.completion.completed/a:1;return(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[(0,s.jsx)(g.k,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===i.step?(0,s.jsx)(b.c,{message:"Automations are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===t||"initial"===i.step)return null;if("updating"===i.step)return(0,s.jsx)("div",{children:"Please do not close the window or navigate away while automations are being updated."});let e=i.completion.errors,n=Object.keys(e).length,o=i.completion.completed-n;return(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[o?(0,s.jsxs)(f.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(l.JO,{name:"check_circle",color:c.fA()}),(0,s.jsx)("div",{children:"start"===t?"Successfully started ".concat(1===o?"1 automation":"".concat(o," automations"),"."):"Successfully stopped ".concat(1===o?"1 automation":"".concat(o," automations"),".")})]}):null,n?(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[(0,s.jsxs)(f.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(l.JO,{name:"warning",color:c.qr()}),(0,s.jsx)("div",{children:"start"===t?"Could not start ".concat(1===n?"1 automation":"".concat(n," automations"),":"):"Could not stop ".concat(1===n?"1 automation":"".concat(n," automations"),":")})]}),(0,s.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(t=>(0,s.jsx)("li",{children:(0,s.jsxs)(f.Z,{direction:"row",spacing:8,children:[(0,s.jsxs)("strong",{children:[t,":"]}),e[t]?(0,s.jsx)("div",{children:e[t]}):null]})},t))})]}):null]})})()]})}),(0,s.jsx)(y.cN,{children:(()=>{if("not-open"===t)return null;switch(i.step){case"initial":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.zx,{onClick:n,children:"Cancel"}),(0,s.jsx)(j.zx,{intent:"primary",onClick:_,children:"start"===t?"Start ".concat(1===a?"1 automation":"".concat(a," automations")):"Stop ".concat(1===a?"1 automation":"".concat(a," automations"))})]});case"updating":return(0,s.jsx)(j.zx,{intent:"primary",disabled:!0,children:"start"===t?"Starting ".concat(1===a?"1 automation":"".concat(a," automations")):"Stopping ".concat(1===a?"1 automation":"".concat(a," automations"))});case"completed":return(0,s.jsx)(j.zx,{intent:"primary",onClick:n,children:"Done"})}})()})]})};var k=n(69557);let _=e=>{let{automations:t,onDone:n}=e,o=t.length,[r,a]=(0,p.useState)("not-open"),{anyOff:i,anyOn:c}=(0,p.useMemo)(()=>(0,k.H)(t.map(e=>{let{instigationState:t}=e;return t})),[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.J,{content:(0,s.jsxs)(x.v2,{children:[(0,s.jsx)(x.sN,{text:"Start ".concat(1===o?"1 automation":"".concat(o," automations")),disabled:!i,"aria-disabled":!i,icon:"toggle_on",onClick:()=>{a("start")}}),(0,s.jsx)(x.sN,{text:"Stop ".concat(1===o?"1 automation":"".concat(o," automations")),disabled:!c,"aria-disabled":!c,icon:"toggle_off",onClick:()=>{a("stop")}})]}),placement:"bottom-end",children:(0,s.jsx)(j.zx,{disabled:!o,intent:"primary",rightIcon:(0,s.jsx)(l.JO,{name:"expand_more"}),children:"Actions"})}),(0,s.jsx)(N,{openWithIntent:r,automations:t,onClose:()=>a("not-open"),onComplete:()=>{n()}})]})};var T=n(18259),z=n(43212),M=n(88510),A=n(35505),L=n(17008);let q="60px minmax(400px, 1.5fr) 240px 1fr 200px 200px",O=e=>{let{checkbox:t}=e;return(0,s.jsxs)(L.VJ,{templateColumns:q,sticky:!0,children:[(0,s.jsx)(L.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:t})}),(0,s.jsx)(L.qN,{children:"Name"}),(0,s.jsx)(L.qN,{children:"Type"}),(0,s.jsx)(L.qN,{children:"Target"}),(0,s.jsx)(L.qN,{children:"Last tick"}),(0,s.jsx)(L.qN,{children:"Last run"})]})},U=(0,A.ZP)(o.x).withConfig({componentId:"sc-40d0a0cf-0"})(["display:grid;grid-template-columns:",";height:100%;"],q);var R=n(37504),I=n(53664),P=n(47933),D=n(24427),Z=n(16336),V=n(88257),$=n(60648),W=n(92474),F=n(6750),X=n(4219),H=n(73310),J=n(86269),Y=n(58905),B=n(27028),K=n(83738),G=n(10539);let Q=(0,p.forwardRef)((e,t)=>{var n;let{index:r,name:a,repoAddress:l,checked:c,onToggleChecked:d}=e,[u,m]=(0,v.td)(B.B8,{variables:{selector:{repositoryName:l.name,repositoryLocationName:l.location,scheduleName:a}},notifyOnNetworkStatusChange:!0}),[x,j]=(0,v.td)(F.d,{variables:{scheduleSelector:{repositoryName:l.name,repositoryLocationName:l.location,scheduleName:a}}});(0,K.v5)((0,p.useCallback)(()=>{u(),x()},[u,x])),(0,Z.C4)(m,Z.dT),(0,Z.C4)(j,Z.dT);let{data:g}=m,f=(0,p.useMemo)(()=>(null==g?void 0:g.scheduleOrError.__typename)!=="Schedule"?null:g.scheduleOrError,[g]),y=null==f?void 0:f.scheduleState,S=(0,p.useMemo)(()=>{if(!y)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=y;return n!==V.ynu.RUNNING||t?n!==V.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[y]),w=null==f?void 0:f.scheduleState.ticks[0],b=(null==f?void 0:f.pipelineName)?[{pipelineName:f.pipelineName}]:null,E=(null===(n=j.data)||void 0===n?void 0:n.scheduleOrError.__typename)==="Schedule"?j.data.scheduleOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":r,children:(0,s.jsxs)(U,{border:"bottom",children:[(0,s.jsx)(L.E5,{children:(0,s.jsx)(h.u,{canShow:S.disabled,content:S.message||"",placement:"top",children:(0,s.jsx)(R.X,{disabled:S.disabled,checked:c,onChange:e=>{if(d&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;d({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(L.E5,{children:(0,s.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[f?(0,s.jsxs)(o.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(X.M,{repoAddress:l,schedule:f},a),(0,H.l)(f.scheduleState.status,f.scheduleState.runningCount)]}):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(P.rU,{to:(0,G.$U)(l,"/schedules/".concat(a)),children:(0,s.jsx)(I.g,{text:a})})]})}),(0,s.jsx)(L.E5,{children:f?(0,s.jsxs)(o.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(W.P,{cronSchedule:f.cronSchedule,executionTimezone:f.executionTimezone}),f.scheduleState.nextTick&&f.scheduleState.status===V.ynu.RUNNING?(0,s.jsx)(i.YS,{children:(0,s.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,s.jsx)(J.v,{timestamp:f.scheduleState.nextTick.timestamp,timezone:f.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,s.jsx)(K.mq,{queryResult:m})}),(0,s.jsx)(L.E5,{children:(0,s.jsx)("div",{children:(0,s.jsx)(D.p,{repoAddress:l,automationType:"schedule",targets:b,assetSelection:E})})}),(0,s.jsx)(L.E5,{children:w?(0,s.jsx)("div",{children:(0,s.jsx)(Y.a,{tick:w})}):(0,s.jsx)(K.mq,{queryResult:m})}),(0,s.jsx)(L.E5,{children:(null==f?void 0:f.scheduleState)&&(null==f?void 0:f.scheduleState.runs[0])?(0,s.jsx)($.Z,{run:f.scheduleState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(K.mq,{queryResult:m})})]})})});var ee=n(6265),et=n(60918),en=n(53029);let es=(0,p.forwardRef)((e,t)=>{var n;let{index:r,name:a,repoAddress:i,checked:l,onToggleChecked:c}=e,[d,u]=(0,v.td)(en.bL,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,sensorName:a}}}),[m,x]=(0,v.td)(ee.Z,{variables:{sensorSelector:{repositoryName:i.name,repositoryLocationName:i.location,sensorName:a}}});(0,K.v5)((0,p.useCallback)(()=>{d(),m()},[d,m])),(0,Z.C4)(u,Z.dT),(0,Z.C4)(x,Z.dT);let{data:j}=u,g=(0,p.useMemo)(()=>(null==j?void 0:j.sensorOrError.__typename)!=="Sensor"?null:j.sensorOrError,[j]),f=null==g?void 0:g.sensorState,y=(0,p.useMemo)(()=>{if(!f)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=f;return n!==V.ynu.RUNNING||t?n!==V.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[f]),S=null==g?void 0:g.sensorState.ticks[0],w=null==g?void 0:g.sensorType,b=w?en.W_[w]:null,E=(null===(n=x.data)||void 0===n?void 0:n.sensorOrError.__typename)==="Sensor"?x.data.sensorOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":r,children:(0,s.jsxs)(U,{border:"bottom",children:[(0,s.jsx)(L.E5,{children:(0,s.jsx)(h.u,{canShow:y.disabled,content:y.message||"",placement:"top",children:(0,s.jsx)(R.X,{disabled:y.disabled,checked:l,onChange:e=>{if(c&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;c({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(L.E5,{children:(0,s.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[g?(0,s.jsx)(et.c,{repoAddress:i,sensor:g},a):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(P.rU,{to:(0,G.$U)(i,"/sensors/".concat(a)),children:(0,s.jsx)(I.g,{text:a})})]})}),(0,s.jsx)(L.E5,{children:(0,s.jsx)("div",{children:b?b.description?(0,s.jsx)(h.u,{content:(0,s.jsx)("div",{style:{maxWidth:"300px"},children:b.description}),placement:"top",children:(0,s.jsx)(z.V,{icon:b.icon,children:b.name})}):(0,s.jsx)(z.V,{icon:b.icon,children:b.name}):null})}),(0,s.jsx)(L.E5,{children:g?(0,s.jsx)("div",{children:(0,s.jsx)(D.p,{targets:g.targets||null,repoAddress:i,assetSelection:E,automationType:g.sensorType})}):(0,s.jsx)(K.mq,{queryResult:x})}),(0,s.jsx)(L.E5,{children:S?(0,s.jsx)("div",{children:(0,s.jsx)(Y.a,{tick:S})}):(0,s.jsx)(K.mq,{queryResult:u})}),(0,s.jsx)(L.E5,{children:(null==g?void 0:g.sensorState)&&(null==g?void 0:g.sensorState.runs[0])?(0,s.jsx)($.Z,{run:g.sensorState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(K.mq,{queryResult:u})})]})})});var eo=n(22921),er=n(40389),ea=n(98956),ei=n(50646),el=n(22563);let ec=e=>{let{repos:t,headerCheckbox:n,checkedKeys:r,onToggleCheckFactory:a}=e,i=p.useRef(null),l=p.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,el.Uz)(t)}),[t]),{expandedKeys:c,onToggle:d,onToggleAll:u}=(0,ei.N)(eo.y,l),m=p.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:n,schedules:s,sensors:o}=t;e.push({type:"header",repoAddress:n,scheduleCount:s.length,sensorCount:o.length});let r=(0,el.Uz)(n);if(c.includes(r)){let t=new Set(o),r=new Set(s);[...o,...s].sort((e,t)=>S.Bl.compare(e,t)).forEach(s=>{t.has(s)?e.push({type:"sensor",repoAddress:n,sensor:s}):r.has(s)&&e.push({type:"schedule",repoAddress:n,schedule:s})})}}),e},[t,c]),x=(0,ea.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),j=(0,M.MG)({count:m.length,getScrollElement:()=>i.current,estimateSize:e=>{let t=m[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:15}),g=j.getTotalSize(),f=j.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(L.W2,{ref:i,children:[(0,s.jsx)(O,{checkbox:n}),(0,s.jsx)(L.Nh,{$totalHeight:g,children:f.map(e=>{let{index:t,key:n,size:i,start:l}=e,p=m[t],g=p.type;if("header"===g)return(0,s.jsx)(T.X2,{$height:i,$start:l,children:(0,s.jsx)(K._$,{repoAddress:p.repoAddress,ref:j.measureElement,index:t,onToggle:d,onToggleAll:u,expanded:c.includes((0,el.Uz)(p.repoAddress)),showLocation:x.has(p.repoAddress.name),rightElement:(0,s.jsxs)(o.x,{flex:{direction:"row",gap:4},children:[(0,s.jsx)(h.u,{content:1===p.sensorCount?"1 sensor":"".concat(p.sensorCount," sensors"),placement:"top",children:(0,s.jsx)(z.V,{icon:"sensors",children:p.sensorCount})}),(0,s.jsx)(h.u,{content:1===p.scheduleCount?"1 schedule":"".concat(p.scheduleCount," schedules"),placement:"top",children:(0,s.jsx)(z.V,{icon:"schedule",children:p.scheduleCount})})]})},n)},n);if("sensor"===g){let e=(0,er.M)(p.repoAddress,p.sensor);return(0,s.jsx)(T.X2,{$height:i,$start:l,children:(0,s.jsx)(es,{index:t,ref:j.measureElement,name:p.sensor,checked:r.has(e),onToggleChecked:a(e),repoAddress:p.repoAddress},n)},n)}if("schedule"===g){let e=(0,er.M)(p.repoAddress,p.schedule);return(0,s.jsx)(T.X2,{$height:i,$start:l,children:(0,s.jsx)(Q,{index:t,ref:j.measureElement,name:p.schedule,checked:r.has(e),onToggleChecked:a(e),repoAddress:p.repoAddress},n)},n)}return(0,s.jsx)("div",{},n)})})]})})};var ed=n(69737),eu=n(20171),eh=n(4378),ep=n(52154),em=n(77044),ex=n(907),ej=n(49455),eg=n(74302),ef=n(74548),ey=n(2389),ev=n(50027),eS=n(2949),ew=n(8355),eb=n(65822);let eE={schedules:{label:"Schedules",value:{type:"schedules",label:"Schedules"},match:["schedules"]},sensors:{label:"Sensors",value:{type:"sensors",label:"Sensors"},match:["sensors"]}},eC=Object.values(eE),eN=()=>{(0,ed.Px)(),(0,eu.j)("Automation");let{allRepos:e,visibleRepos:t,loading:n,data:m,refetch:x}=(0,p.useContext)(ew.C5),[j,g]=(0,eh.q)({queryKey:"search",defaults:{search:""}}),[f,y]=(0,eh.q)({encode:e=>({automationType:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.automationType)||void 0===t?void 0:t.split(","))||[])}}),v=(0,p.useMemo)(()=>new Set(Array.from(f).map(e=>eE[e].value)),[f]),S=(0,ev.A)(),w=(0,eS.g)(),b=(0,ef.im)({name:"Automation type",allValues:eC,icon:"auto_materialize_policy",getStringValue:e=>e.label,state:v,renderLabel:e=>{let{value:t}=e;return(0,s.jsx)("span",{children:t.label})},onStateChanged:e=>{y(new Set(Array.from(e).map(e=>e.type)))}}),E=(0,p.useMemo)(()=>[S,w,b],[S,w,b]),{button:C,activeFiltersJsx:N}=(0,eg.m)({filters:E}),k=(0,p.useMemo)(()=>{let e=Object.values(m).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=(0,ej.S)(t);return e_(e).filter(e=>{let{repoAddress:t}=e;return n.has((0,el.Uz)(t))})},[m,t]),{state:T}=w,z=(0,p.useMemo)(()=>k.map(e=>{let{sensors:t,schedules:n,...s}=e;return{...s,sensors:t.filter(e=>{let{sensorState:t}=e;return(!T.size||!!T.has(t.status))&&(!f.size||!!f.has("sensors"))}),schedules:n.filter(e=>{let{scheduleState:t}=e;return(!T.size||!!T.has(t.status))&&(!f.size||!!f.has("schedules"))})}}),[k,f,T]),M=j.trim().toLocaleLowerCase(),A=M.length>0,L=(0,p.useMemo)(()=>{let e=M.toLocaleLowerCase();return z.map(t=>{let{repoAddress:n,schedules:s,sensors:o}=t;return{repoAddress:n,schedules:s.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t}),sensors:o.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t})}}).filter(e=>{let{sensors:t,schedules:n}=e;return t.length>0||n.length>0})},[z,M]),q=(0,p.useMemo)(()=>z.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...s.filter(e=>{let{sensorState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,sensorState:s}=e;return{repoAddress:t,name:n,type:"sensor",instigationState:s}}),...n.filter(e=>{let{scheduleState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,scheduleState:s}=e;return{repoAddress:t,name:n,type:"schedule",instigationState:s}})]}).flat(),[z]),O=(0,p.useMemo)(()=>q.map(e=>{let{repoAddress:t,name:n}=e;return(0,er.M)(t,n)}),[q]),[{checkedIds:U},{onToggleFactory:R,onToggleAll:I}]=(0,ep.a)(O),P=(0,p.useMemo)(()=>{let e=new Set(L.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...n,...s].map(e=>(0,er.M)(t,e))}).flat());return O.filter(t=>e.has(t))},[O,L]),D=(0,p.useMemo)(()=>{let e=new Set(P.filter(e=>U.has(e)));return q.filter(t=>{let{repoAddress:n,name:s}=t;return e.has((0,er.M)(n,s))})},[P,q,U]),Z=O.length>0,V=D.length,$=P.length>0;return(0,s.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(d.m,{title:(0,s.jsx)(i.X6,{children:"Automation"})}),(0,s.jsxs)(o.x,{padding:{horizontal:24,vertical:12},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,s.jsxs)(o.x,{flex:{direction:"row",gap:12},children:[C,(0,s.jsx)(u.oi,{icon:"search",value:j,onChange:e=>g(e.target.value),placeholder:"Filter by name…",style:{width:"340px"}})]}),(0,s.jsx)(h.u,{content:"You do not have permission to start or stop these schedules",canShow:$&&!Z,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(_,{automations:D,onDone:()=>x()})})]}),N.length?(0,s.jsx)(o.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:N}):null,(()=>{if(n)return(0,s.jsx)(o.x,{flex:{direction:"row",justifyContent:"center"},padding:{top:64},children:(0,s.jsx)(r.f,{label:"Loading automations…"})});let d=e.length>t.length;return L.length?(0,s.jsx)(ec,{headerCheckbox:Z?(0,s.jsx)(ey.W,{checkedCount:V,totalCount:P.length,onToggleAll:I}):void 0,repos:L,checkedKeys:U,onToggleCheckFactory:R}):A?(0,s.jsx)(o.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No matching automations",description:d?(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:j})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:j})," were found in your definitions"]})})}):(0,s.jsx)(o.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No automations",description:d?"No automations were found in the selected code locations":(0,s.jsxs)(i.pN,{children:["There are no automations in this deployment."," ",(0,s.jsx)("a",{href:"https://docs.dagster.io/concepts/automation",target:"_blank",rel:"noreferrer",children:(0,s.jsxs)(o.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:["Learn more about automations",(0,s.jsx)(l.JO,{name:"open_in_new",color:c.Es()})]})})]})})})})()]})};var ek=eN;let e_=e=>{let t=e.map(e=>e.locationOrLoadError),n=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:s,schedules:o,sensors:r}=t,a=(0,eb.kQ)(s,e.name);(r.length>0||o.length>0)&&n.push({repoAddress:a,schedules:o,sensors:r})}return(0,ex.S)(n)}},907:function(e,t,n){n.d(t,{S:function(){return o}});var s=n(22563);let o=e=>[...e].sort((e,t)=>{let n=(0,s.Uz)(e.repoAddress),o=(0,s.Uz)(t.repoAddress);return n.localeCompare(o)})},49455:function(e,t,n){n.d(t,{S:function(){return r}});var s=n(65822),o=n(22563);let r=e=>new Set(e.map(e=>(0,o.Uz)((0,s.kQ)(e.repository.name,e.repositoryLocation.name))))}}]);
//# sourceMappingURL=8346.61fe4f0f0f724eda.js.map